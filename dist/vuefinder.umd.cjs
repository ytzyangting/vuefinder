(function(e,ve){typeof exports=="object"&&typeof module<"u"?module.exports=ve(require("vue"),require("plupload")):typeof define=="function"&&define.amd?define(["vue","plupload"],ve):(e=typeof globalThis<"u"?globalThis:e||self,e.VueFinder=ve(e.Vue,e.plupload))})(this,function(e,ve){var vo;"use strict";const ot=(vo=document.querySelector('meta[name="csrf-token"]'))==null?void 0:vo.getAttribute("content"),nt=(o,{method:t="get",params:n={},json:s=!0,signal:l=null})=>{const a={method:t};if(a.signal=l,t=="get")o+="?"+new URLSearchParams(n);else{a.headers={},ot&&(a.headers["X-CSRF-Token"]=ot);let u=new FormData;for(const[g,c]of Object.entries(n))u.append(g,c);a.body=u}return fetch(o,a).then(u=>u.ok?s?u.json():u.text():u.json().then(Promise.reject.bind(Promise)))};function Vo(o){return{all:o=o||new Map,on:function(t,n){var s=o.get(t);s?s.push(n):o.set(t,[n])},off:function(t,n){var s=o.get(t);s&&(n?s.splice(s.indexOf(n)>>>0,1):o.set(t,[]))},emit:function(t,n){var s=o.get(t);s&&s.slice().map(function(l){l(n)}),(s=o.get("*"))&&s.slice().map(function(l){l(t,n)})}}}function _t(o){let t=localStorage.getItem(o+"_storage");const n=e.ref(JSON.parse(t));e.watch(n,s);function s(){n.value===null||n.value===""?localStorage.removeItem(o+"_storage"):localStorage.setItem(o+"_storage",JSON.stringify(n.value))}function l(g,c){n.value=Object.assign({...n.value},{[g]:c})}function a(){n.value=null}return{getStore:(g,c=null)=>n.value===null||n.value===""?c:n.value.hasOwnProperty(g)?n.value[g]:c,setStore:l,clearStore:a}}const or=e.ref("");function ue(){function o(t){or.value=t}return{apiUrl:or,setApiUrl:o}}const Mo={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},Bo={key:0,class:"flex text-center"},$o=["aria-label"],To=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10.5v6m3-3H9m4.06-7.19l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})],-1)],Ao=["aria-label"],Io=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1)],Lo=["aria-label"],Oo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1)],jo=["aria-label"],Po=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1)],zo=["aria-label"],Ro=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})],-1)],Ho=["aria-label"],Uo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1)],Fo=["aria-label"],Ko=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1)],Yo={key:1,class:"flex text-center"},Wo={class:"pl-2"},Xo={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Zo={key:0,class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},qo=[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)],Go={class:"flex text-center items-center justify-end"},Jo=["aria-label"],Qo=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"},null,-1)],en=["aria-label"],tn={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},rn={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"},on={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},nn=["aria-label"],sn={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"},an={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"},ln=Object.assign({name:"VFToolbar"},{props:{data:Object},setup(o){const t=e.inject("emitter"),{getStore:n,setStore:s}=e.inject("storage"),{t:l}=e.inject("i18n"),a=e.ref(n("viewport","grid")),u=e.ref([]),g=e.ref(n("full-screen",!1)),c=e.ref("");t.on("vf-search-query",({newQuery:S})=>{c.value=S});const y=e.inject("loadingState"),m=()=>y.value,b=()=>{g.value=!g.value,t.emit("vf-fullscreen-toggle")};return t.on("vf-nodes-selected",S=>{u.value=S}),t.on("vf-view-toggle",S=>{s("viewport",S),a.value=S}),(S,k)=>(e.openBlock(),e.createElementBlock("div",Mo,[c.value.length?(e.openBlock(),e.createElementBlock("div",Yo,[e.createElementVNode("div",Wo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Search results for"))+" ",1),e.createElementVNode("span",Xo,e.toDisplayString(c.value),1)]),m()?(e.openBlock(),e.createElementBlock("svg",Zo,qo)):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",Bo,[e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("New Folder"),"data-microtip-position":"bottom-right",role:"tooltip",onClick:k[0]||(k[0]=E=>e.unref(t).emit("vf-modal-show",{type:"new-folder",items:u.value}))},To,8,$o),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("New File"),"data-microtip-position":"bottom",role:"tooltip",onClick:k[1]||(k[1]=E=>e.unref(t).emit("vf-modal-show",{type:"new-file",items:u.value}))},Io,8,Ao),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Rename"),"data-microtip-position":"bottom",role:"tooltip",onClick:k[2]||(k[2]=E=>u.value.length!=1||e.unref(t).emit("vf-modal-show",{type:"rename",items:u.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([u.value.length==1?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Oo,2))],8,Lo),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Delete"),"data-microtip-position":"bottom",role:"tooltip",onClick:k[3]||(k[3]=E=>!u.value.length||e.unref(t).emit("vf-modal-show",{type:"delete",items:u.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([u.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Po,2))],8,jo),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Upload"),"data-microtip-position":"bottom",role:"tooltip",onClick:k[4]||(k[4]=E=>e.unref(t).emit("vf-modal-show",{type:"upload",items:u.value}))},Ro,8,zo),u.value.length==1&&u.value[0].mime_type=="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":e.unref(l)("Unrchive"),"data-microtip-position":"bottom",role:"tooltip",onClick:k[5]||(k[5]=E=>!u.value.length||e.unref(t).emit("vf-modal-show",{type:"unarchive",items:u.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([u.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Uo,2))],8,Ho)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5","aria-label":e.unref(l)("Archive"),"data-microtip-position":"bottom",role:"tooltip",onClick:k[6]||(k[6]=E=>!u.value.length||e.unref(t).emit("vf-modal-show",{type:"archive",items:u.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([u.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Ko,2))],8,Fo))])),e.createElementVNode("div",Go,[e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Dark Mode"),"data-microtip-position":"bottom",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onClick:k[7]||(k[7]=E=>e.unref(t).emit("vf-darkMode-toggle")),viewBox:"0 0 24 24","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-6 w-6 m-auto cursor-pointer stroke-sky-500 fill-sky-100 hover:stroke-sky-600 dark:stroke-gray-400 dark:fill-gray-400/20 dark:hover:stroke-gray-300"},Qo))],8,Jo),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Toggle Full Screen"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:b},[(e.openBlock(),e.createElementBlock("svg",tn,[g.value?(e.openBlock(),e.createElementBlock("path",rn)):(e.openBlock(),e.createElementBlock("path",on))]))],8,en),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(l)("Change View"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:k[8]||(k[8]=E=>c.value.length||e.unref(t).emit("vf-view-toggle",a.value=="list"?"grid":"list"))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([c.value.length?"stroke-gray-200  dark:stroke-gray-700":"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[a.value=="grid"?(e.openBlock(),e.createElementBlock("path",sn)):e.createCommentVNode("",!0),a.value=="list"?(e.openBlock(),e.createElementBlock("path",an)):e.createCommentVNode("",!0)],2))],8,nn)])]))}});var cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dn(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var nr={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(cn,function(){function n(d,h){var r=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(r!=null){var p,i,f,v,_=[],x=!0,I=!1;try{if(f=(r=r.call(d)).next,h===0){if(Object(r)!==r)return;x=!1}else for(;!(x=(p=f.call(r)).done)&&(_.push(p.value),_.length!==h);x=!0);}catch(z){I=!0,i=z}finally{try{if(!x&&r.return!=null&&(v=r.return(),Object(v)!==v))return}finally{if(I)throw i}}return _}}function s(d,h){var r=Object.keys(d);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(d);h&&(p=p.filter(function(i){return Object.getOwnPropertyDescriptor(d,i).enumerable})),r.push.apply(r,p)}return r}function l(d){for(var h=1;h<arguments.length;h++){var r=arguments[h]!=null?arguments[h]:{};h%2?s(Object(r),!0).forEach(function(p){c(d,p,r[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(p){Object.defineProperty(d,p,Object.getOwnPropertyDescriptor(r,p))})}return d}function a(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function u(d,h){for(var r=0;r<h.length;r++){var p=h[r];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,$(p.key),p)}}function g(d,h,r){return h&&u(d.prototype,h),r&&u(d,r),Object.defineProperty(d,"prototype",{writable:!1}),d}function c(d,h,r){return h=$(h),h in d?Object.defineProperty(d,h,{value:r,enumerable:!0,configurable:!0,writable:!0}):d[h]=r,d}function y(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),h&&b(d,h)}function m(d){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},m(d)}function b(d,h){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,i){return p.__proto__=i,p},b(d,h)}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(d,h,r){return S()?k=Reflect.construct.bind():k=function(i,f,v){var _=[null];_.push.apply(_,f);var x=Function.bind.apply(i,_),I=new x;return v&&b(I,v.prototype),I},k.apply(null,arguments)}function E(d){return Function.toString.call(d).indexOf("[native code]")!==-1}function N(d){var h=typeof Map=="function"?new Map:void 0;return N=function(p){if(p===null||!E(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(typeof h<"u"){if(h.has(p))return h.get(p);h.set(p,i)}function i(){return k(p,arguments,m(this).constructor)}return i.prototype=Object.create(p.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),b(i,p)},N(d)}function D(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function A(d,h){if(h&&(typeof h=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(d)}function T(d){var h=S();return function(){var p=m(d),i;if(h){var f=m(this).constructor;i=Reflect.construct(p,arguments,f)}else i=p.apply(this,arguments);return A(this,i)}}function B(d,h){for(;!Object.prototype.hasOwnProperty.call(d,h)&&(d=m(d),d!==null););return d}function L(){return typeof Reflect<"u"&&Reflect.get?L=Reflect.get.bind():L=function(h,r,p){var i=B(h,r);if(i){var f=Object.getOwnPropertyDescriptor(i,r);return f.get?f.get.call(arguments.length<3?h:p):f.value}},L.apply(this,arguments)}function R(d,h){return H(d)||n(d,h)||W(d,h)||oe()}function w(d){return M(d)||X(d)||W(d)||ie()}function M(d){if(Array.isArray(d))return te(d)}function H(d){if(Array.isArray(d))return d}function X(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function W(d,h){if(d){if(typeof d=="string")return te(d,h);var r=Object.prototype.toString.call(d).slice(8,-1);if(r==="Object"&&d.constructor&&(r=d.constructor.name),r==="Map"||r==="Set")return Array.from(d);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(d,h)}}function te(d,h){(h==null||h>d.length)&&(h=d.length);for(var r=0,p=new Array(h);r<h;r++)p[r]=d[r];return p}function ie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function re(d,h){var r=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(!r){if(Array.isArray(d)||(r=W(d))||h&&d&&typeof d.length=="number"){r&&(d=r);var p=0,i=function(){};return{s:i,n:function(){return p>=d.length?{done:!0}:{done:!1,value:d[p++]}},e:function(x){throw x},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,v=!1,_;return{s:function(){r=r.call(d)},n:function(){var x=r.next();return f=x.done,x},e:function(x){v=!0,_=x},f:function(){try{!f&&r.return!=null&&r.return()}finally{if(v)throw _}}}}function C(d,h){if(typeof d!="object"||d===null)return d;var r=d[Symbol.toPrimitive];if(r!==void 0){var p=r.call(d,h||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(d)}function $(d){var h=C(d,"string");return typeof h=="symbol"?h:String(h)}var V=function(h,r,p){var i=h.x,f=h.y,v=p.x,_=p.y,x={"+":{x:i+v,y:f+_},"-":{x:i-v,y:f-_},"*":{x:i*v,y:f*_},"/":{x:i/v,y:f/_}};return x[r]},K=function(h){return{x:h.left,y:h.top}},O=function(h){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{left:h.x,top:h.y,right:h.x,bottom:h.y,width:r,height:r}},ce=function(h){return{x:h,y:h}},ae=function(d,h){var r=h;window.addEventListener("resize",r),window.addEventListener("scroll",r);var p=new MutationObserver(r);d.forEach(function(f,v){p.observe(f,{childList:v!==0,attributes:!0})});var i=function(){return Od(p,r)};return{observer:p,callback:r,cleanup:i}},pt=function(d){var h=bt(d);return h.x||h.y?!0:d instanceof Document?d.body?!!(d.body.scrollTop=1):!!(d.documentElement.scrollTop=1):!!(d.scrollTop=1)},gt=function(){var d=document.createElement("div");return d.style.position="fixed",d.style.overflow="hidden",d.style.pointerEvents="none",d.style.zIndex="999999999999999999",d},Qt=function(d){var h=document.createElement("div");return h.style.position="absolute",d||(h.style.background="rgba(0, 175, 255, 0.2)",h.style.border="1px solid rgba(0, 175, 255, 0.8)",h.style.display="none",h.style.pointerEvents="none"),h},yt=function(d,h){var r;return function(){for(var p=arguments.length,i=new Array(p),f=0;f<p;f++)i[f]=arguments[f];var v=function(){r=null,d.apply(void 0,i)};clearTimeout(r),r=setTimeout(v,h)}},er=function(){var d,h,r,p;return{y:((d=document.body)===null||d===void 0?void 0:d.scrollTop)||((h=document.documentElement)===null||h===void 0?void 0:h.scrollTop)||0,x:((r=document.body)===null||r===void 0?void 0:r.scrollLeft)||((p=document.documentElement)===null||p===void 0?void 0:p.scrollLeft)||0}},So=function(d){var h=function r(p){var i,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=(i=p[f])===null||i===void 0?void 0:i.parentNode;return v?(p.push(v),f++,r(p,f)):p};return h([d])},Ed=function(d,h){if(d instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var r=d.getBoundingClientRect();return{top:r.top,left:r.left,bottom:r.bottom,right:r.right,width:(d.clientWidth||r.width)*h,height:(d.clientHeight||r.height)*h}},_o=function(d,h){var r={top:Number.POSITIVE_INFINITY,left:Number.POSITIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,right:Number.NEGATIVE_INFINITY,width:Number.NEGATIVE_INFINITY,height:Number.NEGATIVE_INFINITY};return Ne(d).forEach(function(p){var i=h.getRect(p);r.top=Math.min(r.top,i.top),r.left=Math.min(r.left,i.left),r.bottom=Math.max(r.bottom,i.bottom),r.right=Math.max(r.right,i.right)}),r.height=r.bottom-r.top,r.width=r.right-r.left,r},bt=function(d){return!d||d instanceof Document?er():{x:d.scrollLeft>=0?d.scrollLeft:er().x,y:d.scrollTop>=0?d.scrollTop:er().y}},wo=function(d){var h=d.elementRect,r=d.containerRect,p=d.tolerance,i=p===void 0?{x:0,y:0}:p,f=[];return h.top-i.y<r.top&&f.push("top"),h.left-i.x<r.left&&f.push("left"),h.bottom+i.y>r.bottom&&f.push("bottom"),h.right+i.y>r.right&&f.push("right"),f},Nd=function(d){var h=d.event;return{x:h.clientX,y:h.clientY}},Cd=function(d){var h=d.scrollAmount,r=d.initialPointerPos,p=d.pointerPos,i={};return p.x>r.x-h.x?(i.left=r.x-h.x,i.width=p.x-r.x+h.x):(i.left=p.x,i.width=r.x-p.x-h.x),p.y>r.y-h.y?(i.top=r.y-h.y,i.height=p.y-r.y+h.y):(i.top=p.y,i.height=r.y-p.y-h.y),i},xo=function(h){var r={x:0,y:0},p=window.getComputedStyle(h);if(!p.transform||p.transform==="none")return r;if(p.transform.indexOf("3d")>=0){var i=p.transform.trim().match(/matrix3d\((.*?)\)/);if(i&&i.length){var f,v=(f=i[1])===null||f===void 0?void 0:f.split(",");r.x=parseInt(v[12])||0,r.y=parseInt(v[13])||0}return r}var _=p.transform.trim().match(/matrix\((.*?)\)/);if(_&&_.length){var x,I=(x=_[1])===null||x===void 0?void 0:x.split(",");r.x=parseInt(I[4])||0,r.y=parseInt(I[5])||0}return r},Vd=function(h){var r=h.style.transform;if(!r||r.indexOf("translate")<0)return xo(h);var p={x:0,y:0},i=r.trim().match(/translate[3dD]*?\(.*?\)/);if(i){var f,v=(f=i[0])===null||f===void 0?void 0:f.split("(");if(v){var _,x=(_=v[1])===null||_===void 0?void 0:_.split(",");p.x=parseInt(x[0])||0,p.y=parseInt(x[1])||0}}return!p.x&&!p.x?xo(h):p},Md=function(h){var r=h.style,p={x:parseInt(r.left)||0,y:parseInt(r.top)||0};if(!p.x&&!p.x){var i=window.getComputedStyle(h);return{x:parseInt(i.left)||0,y:parseInt(i.top)||0}}return p},Bd=function(d,h){return h?Vd(d):Md(d)},$d=function(d){var h=d.element,r=d.edges,p=d.elementRect,i=d.containerRect,f=d.elementPos,v=d.useTransform;r.includes("top")&&et(h,{y:f.y+i.top-p.top,x:f.x},v),r.includes("left")&&et(h,{y:f.y,x:f.x+i.left-p.left},v),r.includes("bottom")&&et(h,{y:f.y+i.bottom-p.bottom,x:f.x},v),r.includes("right")&&et(h,{y:f.y,x:f.x+i.right-p.right},v)},ko=function(d){var h=d.computedStyle,r=d.node,p=h.position,i=p==="absolute"||p==="relative"||p==="fixed";!(r instanceof Document)&&!i&&(r.style.position="relative")},Td=function(d){var h=d.shiftKey,r=d.keyboardDragSpeed,p=d.zoom,i=d.key,f=d.dragKeys,v=d.scrollDiff,_=d.canScroll,x=d.scrollCallback,I={x:0,y:0},z=h?r*4*p:r*p;return f.left.includes(i)&&(I.x=v.x||-z,!h&&!v.x&&_&&x(["left"],r)),f.right.includes(i)&&(I.x=v.x||z,!h&&!v.x&&_&&x(["right"],r)),f.up.includes(i)&&(I.y=v.y||-z,!h&&!v.y&&_&&x(["top"],r)),f.down.includes(i)&&(I.y=v.y||z,!h&&!v.y&&_&&x(["bottom"],r)),I},Ad=function(d){var h=d.element,r=d.force,p=d.multiSelectionToggle,i=d.SelectedSet,f=d.hoverClassName;h.classList.contains(f)&&!r||(i.has(h)?p&&i.delete(h):i.add(h),h.classList.add(f))},Id=function(d){var h=d.element,r=d.force,p=d.SelectedSet,i=d.PrevSelectedSet,f=d.hoverClassName;if(!h.classList.contains(f)&&!r)return!1;var v=p.has(h),_=i.has(h);v&&!_?p.delete(h):!v&&_&&p.add(h),h.classList.remove(f)},Qe=function(h,r,p){return console.warn('[DragSelect] TypeIssue: setting "'.concat(h,'" is not of type "').concat(r,'".'))},P=function(h,r,p,i){if(r===void 0)return p?c({},h,i):{};if(r===null)return c({},h,null);var f=!0,v=!1,_=typeof i=="string";_&&(f=typeof r=="string"||r instanceof String),_&&!f&&(v=!0,Qe(h,"string"));var x=!Number.isNaN(i)&&typeof i=="number";x&&(f=!Number.isNaN(r)&&typeof r=="number"),x&&!f&&(v=!0,Qe(h,"number"));var I=Object.prototype.toString.call(i)==="[object Object]";I&&(f=Object.prototype.toString.call(r)==="[object Object]"),I&&!f&&(v=!0,Qe(h,"object"));var z=typeof i=="boolean";z&&(f=typeof r=="boolean"),z&&!f&&(v=!0,Qe(h,"boolean"));var G=Array.isArray(i);G&&(f=Array.isArray(r)),G&&!f&&(v=!0,Qe(h,"array"));var de=v||p;return h==="dragKeys"&&f?c({},h,Object.assign(i,r)):h==="dragKeys"&&!f?de?c({},h,i):{}:(h==="dropZones"&&f&&new Set(r.map(function(he){return he.id})).size!==r.length&&console.warn('[DragSelect] UniqueConstraintsIssue: setting "dropZones" contains duplicate ids.'),f?c({},h,r):de?c({},h,i):{})},Ld=function(d,h){return l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l({},P("area",d.area,h,document)),P("selectables",d.selectables,h,null)),P("autoScrollSpeed",d.autoScrollSpeed,h,5)),P("overflowTolerance",d.overflowTolerance,h,{x:25,y:25})),P("zoom",d.zoom,h,1)),P("customStyles",d.customStyles,h,!1)),P("multiSelectMode",d.multiSelectMode,h,!1)),P("multiSelectToggling",d.multiSelectToggling,h,!0)),P("multiSelectKeys",d.multiSelectKeys,h,["Control","Shift","Meta"])),P("selector",d.selector,h,null)),P("selectionThreshold",d.selectionThreshold,h,0)),P("draggability",d.draggability,h,!0)),P("immediateDrag",d.immediateDrag,h,!0)),P("keyboardDrag",d.keyboardDrag,h,!0)),P("dragKeys",d.dragKeys,h,{up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]})),P("keyboardDragSpeed",d.keyboardDragSpeed,h,10)),P("useTransform",d.useTransform,h,!0)),P("refreshMemoryRate",d.refreshMemoryRate,h,80)),P("dropZones",d.dropZones,h,[])),P("dropInsideThreshold",d.dropInsideThreshold,h,1)),P("dropTargetThreshold",d.dropTargetThreshold,h,0)),P("usePointerEvents",d.usePointerEvents,h,!1)),P("hoverClass",d.hoverClass,h,"ds-hover")),P("selectableClass",d.selectableClass,h,"ds-selectable")),P("selectedClass",d.selectedClass,h,"ds-selected")),P("selectorClass",d.selectorClass,h,"ds-selector")),P("selectorAreaClass",d.selectorAreaClass,h,"ds-selector-area")),P("droppedTargetClass",d.droppedTargetClass,h,"ds-dropped-target")),P("droppedInsideClass",d.droppedInsideClass,h,"ds-dropped-inside")),P("droppableClass",d.droppableClass,h,"ds-droppable")),P("dropZoneClass",d.dropZoneClass,h,"ds-dropzone")),P("dropZoneReadyClass",d.dropZoneReadyClass,h,"ds-dropzone-ready")),P("dropZoneTargetClass",d.dropZoneTargetClass,h,"ds-dropzone-target")),P("dropZoneInsideClass",d.dropZoneInsideClass,h,"ds-dropzone-inside")),P("dragAsBlock",d.dragAsBlock,h,!1))},Re=function(d,h){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,p=d;if(r>0){var i=(d.right-d.left)*r,f=(d.bottom-d.top)*r;p={left:d.left+i,right:d.right-i,top:d.top+f,bottom:d.bottom-f}}return p.left<h.right&&p.right>h.left&&p.top<h.bottom&&p.bottom>h.top},Do=function(d){var h=d.element,r=d.posDirection,p=d.containerRect,i=d.useTransform,f=Bd(h,i),v=V(f,"+",r);et(h,v,i);var _=h.getBoundingClientRect(),x=wo({elementRect:_,containerRect:p});$d({element:h,edges:x,elementRect:_,containerRect:p,elementPos:v,useTransform:i})},Od=function(d,h){window.removeEventListener("resize",h),window.removeEventListener("scroll",h),d.disconnect()},jd=function(d,h,r){if(h.length){var p=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,i=d instanceof Document?p||document.body:d,f=h.includes("top")&&i.scrollTop>0,v=h.includes("bottom")&&i.scrollTop<i.scrollHeight,_=h.includes("left")&&i.scrollLeft>0,x=h.includes("right")&&i.scrollLeft<i.scrollWidth;f&&(i.scrollTop-=1*r),v&&(i.scrollTop+=1*r),_&&(i.scrollLeft-=1*r),x&&(i.scrollLeft+=1*r)}},et=function(d,h,r){if(r){var p=d.style.transform;d.style.transform="translate3d(".concat(h.x,"px,").concat(h.y,"px,1px) ").concat(p.replace(/translate.*?\)/g,""))}else d.style.left="".concat(h.x,"px"),d.style.top="".concat(h.y,"px");return d},Pd=function(d){for(var h=d.subscribe,r=d.publish,p=d.Interaction,i=d.SelectedSet,f=d.DropZones,v={"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(G){return G.event}}],"Interaction:end":[{name:"callback",extraData:function(){var G=f.getTarget();return l({},G?{dropTarget:G.toObject()}:{})}}]},_=function(){var G=R(I[x],2),de=G[0],he=G[1];["pre",!1].forEach(function(be){return h(be?"".concat(de,":").concat(be):de,function(Z){return he.forEach(function(ne){return(!ne.condition||ne.condition(Z))&&r(be?"".concat(be).concat(ne.name):ne.name,l(l({items:i.elements,isDragging:p.isDragging},Z),ne.extraData?ne.extraData(Z):{}))})})})},x=0,I=Object.entries(v);x<I.length;x++)_()},Ne=function(d){return d?!Array.isArray(d)&&(d instanceof HTMLElement||d instanceof SVGElement)?[d]:w(new Set(w(d))):[]},Eo=function(d,h){d.style.left="".concat(h.left,"px"),d.style.top="".concat(h.top,"px"),d.style.width="".concat(h.width,"px"),d.style.height="".concat(h.height,"px")},zd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"DS",void 0),c(this,"_observers",void 0),c(this,"_node",void 0),c(this,"_parentNodes",void 0),c(this,"_computedStyle",void 0),c(this,"_computedBorder",void 0),c(this,"_rect",void 0),c(this,"setArea",function(i){r.reset(),r._node=i,ko({computedStyle:r.computedStyle,node:r._node}),setTimeout(function(){r.DS.PubSub.publish("Area:modified:pre",{item:r}),r.reset(),r.DS.PubSub.publish("Area:modified",{item:r})})}),c(this,"start",function(){r._observers=ae(r.parentNodes,yt(function(i){r.DS.PubSub.publish("Area:modified:pre",{event:i,item:r}),r.reset(),r.DS.PubSub.publish("Area:modified",{event:i,item:r})},60))}),c(this,"reset",function(){r._computedStyle=void 0,r._rect=void 0,r._computedBorder=void 0,r._parentNodes=void 0}),c(this,"stop",function(){r._observers.cleanup(),r.reset()}),c(this,"scroll",function(i,f){var v={scroll_directions:i,scroll_multiplier:f};r.DS.PubSub.publish("Area:scroll:pre",v),jd(r._node,i,f),r.DS.PubSub.publish("Area:scroll",v)}),this.DS=p,this.setArea(this.DS.stores.SettingsStore.s.area),this.DS.PubSub.subscribe("Settings:updated:area",function(i){var f=i.settings;r.setArea(f.area)}),this.DS.PubSub.subscribe("Interaction:init",this.start),this.DS.PubSub.subscribe("Interaction:end",this.reset)}return g(d,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof Document?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=Ed(this.HTMLNode,this.DS.stores.SettingsStore.s.zoom)}},{key:"parentNodes",get:function(){return this._parentNodes?this._parentNodes:this._parentNodes=So(this.HTMLNode)}}]),d}(),Rd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"_prevCursorPos",void 0),c(this,"_prevScrollPos",void 0),c(this,"_elements",[]),c(this,"_dragKeys",void 0),c(this,"_dragKeysFlat",[]),c(this,"_selectionRect",void 0),c(this,"assignDragkeys",function(){r._dragKeys={up:r.DS.stores.SettingsStore.s.dragKeys.up.map(function(i){return i.toLowerCase()}),down:r.DS.stores.SettingsStore.s.dragKeys.down.map(function(i){return i.toLowerCase()}),left:r.DS.stores.SettingsStore.s.dragKeys.left.map(function(i){return i.toLowerCase()}),right:r.DS.stores.SettingsStore.s.dragKeys.right.map(function(i){return i.toLowerCase()})},r._dragKeysFlat=[].concat(w(r._dragKeys.up),w(r._dragKeys.down),w(r._dragKeys.left),w(r._dragKeys.right))}),c(this,"keyboardDrag",function(i){var f=i.event,v=i.key,_=v.toLowerCase();if(!(!r.DS.stores.SettingsStore.s.keyboardDrag||!r._dragKeysFlat.includes(_)||!r.DS.SelectedSet.size||!r.DS.stores.SettingsStore.s.draggability||r.DS.continue)){var x={event:f,isDragging:!0,isDraggingKeyboard:!0};r.DS.publish(["Interaction:start:pre","Interaction:start"],x),r._elements=r.DS.getSelection(),r.DS.stores.SettingsStore.s.dragAsBlock&&(r._selectionRect=_o(r._elements,r.DS.SelectableSet)),r.handleZIndex(!0);var I=Td({shiftKey:r.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:r.DS.stores.SettingsStore.s.keyboardDragSpeed,zoom:r.DS.stores.SettingsStore.s.zoom,key:_,scrollCallback:r.DS.Area.scroll,scrollDiff:r._scrollDiff,canScroll:r.DS.stores.ScrollStore.canScroll,dragKeys:r._dragKeys});r.DS.stores.SettingsStore.s.dragAsBlock&&(I=r.limitDirection(I)),r._elements.forEach(function(z){return Do({element:z,posDirection:I,containerRect:r.DS.SelectorArea.rect,useTransform:r.DS.stores.SettingsStore.s.useTransform})}),r.DS.publish(["Interaction:update:pre","Interaction:update"],x)}}),c(this,"keyboardEnd",function(i){var f=i.event,v=i.key,_=v.toLowerCase();if(!(!r.DS.stores.SettingsStore.s.keyboardDrag||!r._dragKeysFlat.includes(_)||!r.DS.SelectedSet.size||!r.DS.stores.SettingsStore.s.draggability)){var x={event:f,isDragging:r.DS.stores.SettingsStore.s.draggability,isDraggingKeyboard:!0};r.DS.publish(["Interaction:end:pre","Interaction:end"],x)}}),c(this,"start",function(i){var f=i.isDragging,v=i.isDraggingKeyboard;!f||v||(r._prevCursorPos=null,r._prevScrollPos=null,r._elements=r.DS.getSelection(),r.DS.stores.SettingsStore.s.dragAsBlock&&(r._selectionRect=_o(r._elements,r.DS.SelectableSet)),r.handleZIndex(!0))}),c(this,"stop",function(i){i!=null&&i.isKeyboard||(r._prevCursorPos=null,r._prevScrollPos=null,r.handleZIndex(!1),r._elements=[])}),c(this,"update",function(i){var f=i.isDragging,v=i.isDraggingKeyboard;if(!(!f||!r._elements.length||v||r.DS.continue)){var _=V(r._cursorDiff,"+",r._scrollDiff);r.DS.stores.SettingsStore.s.dragAsBlock&&(_=r.limitDirection(_)),r._elements.forEach(function(x){return Do({element:x,posDirection:_,containerRect:r.DS.SelectorArea.rect,useTransform:r.DS.stores.SettingsStore.s.useTransform})})}}),c(this,"limitDirection",function(i){var f=r.DS.SelectorArea.rect,v=r.DS.stores.ScrollStore.scrollAmount,_={top:f.top-r._selectionRect.top+v.y,left:f.left-r._selectionRect.left+v.x,bottom:f.bottom-r._selectionRect.bottom+v.y,right:f.right-r._selectionRect.right+v.x};return i.x===0&&i.y===0||(i.y<0&&(i.y=Math.max(i.y,_.top)),i.x<0&&(i.x=Math.max(i.x,_.left)),i.y>0&&(i.y=Math.min(i.y,_.bottom)),i.x>0&&(i.x=Math.min(i.x,_.right)),r._selectionRect.top+=i.y,r._selectionRect.bottom+=i.y,r._selectionRect.left+=i.x,r._selectionRect.right+=i.x),i}),c(this,"handleZIndex",function(i){r._elements.forEach(function(f){return f.style.zIndex="".concat((parseInt(f.style.zIndex)||0)+i?9999:-9998)})}),this.DS=p,this.DS.subscribe("Settings:updated:dragKeys",this.assignDragkeys),this.assignDragkeys(),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return g(d,[{key:"_cursorDiff",get:function(){var r=this.DS.stores.PointerStore.currentVal,p=this._prevCursorPos?V(r,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=r,p}},{key:"_scrollDiff",get:function(){var r=this.DS.stores.ScrollStore.currentVal,p=this._prevScrollPos?V(r,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=r,p}}]),d}(),Hd=function(){function d(h){var r=this,p=h.DS,i=h.id,f=h.element,v=h.droppables;a(this,d),c(this,"id",void 0),c(this,"element",void 0),c(this,"_droppables",void 0),c(this,"_rect",void 0),c(this,"_observers",void 0),c(this,"_timeout",void 0),c(this,"_itemsDropped",[]),c(this,"_itemsInside",void 0),c(this,"setReadyClasses",function(_){if(!r.isDestroyed){var x=r.droppables.filter(function(I){return r.DS.SelectedSet.has(I)});x.length&&(x.forEach(function(I){I.classList[_]("".concat(r.Settings.droppableClass)),I.classList[_]("".concat(r.Settings.droppableClass,"-").concat(r.id))}),r.element.classList[_]("".concat(r.Settings.dropZoneReadyClass)))}}),c(this,"handleNoDrop",function(){var _;r.isDestroyed||(r.DS.SelectedSet.forEach(function(x){x.classList.remove(r.Settings.droppedTargetClass),x.classList.remove("".concat(r.Settings.droppedTargetClass,"-").concat(r.id))}),r._itemsDropped=r._itemsDropped.filter(function(x){return!r.DS.SelectedSet.has(x)}),(_=r._itemsDropped)!==null&&_!==void 0&&_.length||r.element.classList.remove("".concat(r.Settings.dropZoneTargetClass)))}),c(this,"handleDrop",function(){var _,x,I;r.isDestroyed||(r._itemsDropped=w(new Set([].concat(w(r._itemsDropped),w((_=r.droppables)===null||_===void 0?void 0:_.filter(function(z){return r.DS.SelectedSet.has(z)}))))),(x=r._itemsDropped)===null||x===void 0||x.forEach(function(z){z.classList.add("".concat(r.Settings.droppedTargetClass)),z.classList.add("".concat(r.Settings.droppedTargetClass,"-").concat(r.id))}),(I=r._itemsDropped)!==null&&I!==void 0&&I.length&&r.element.classList.add("".concat(r.Settings.dropZoneTargetClass)))}),c(this,"handleItemsInsideClasses",function(){var _=!1;r.droppables.forEach(function(x){r.itemsInside.includes(x)?(x.classList.add("".concat(r.Settings.droppedInsideClass)),x.classList.add("".concat(r.Settings.droppedInsideClass,"-").concat(r.id)),_=!0):(x.classList.remove("".concat(r.Settings.droppedInsideClass,"-").concat(r.id)),x.className.includes("".concat(r.Settings.droppedInsideClass,"-"))||x.classList.remove("".concat(r.Settings.droppedInsideClass)))}),_?r.element.classList.add("".concat(r.Settings.dropZoneInsideClass)):r.element.classList.remove("".concat(r.Settings.dropZoneInsideClass))}),c(this,"start",function(_){var x=_.isDragging;!x||r.isDestroyed||r.setReadyClasses("add")}),c(this,"stop",function(_){var x=_.isDragging;!x||r.isDestroyed||(r.setReadyClasses("remove"),r.handleItemsInsideClasses())}),c(this,"toObject",function(){return{id:r.id,element:r.element,droppables:r.droppables,itemsDropped:r.itemsDropped,itemsInside:r.itemsInside}}),this.DS=p,this.Settings=p.stores.SettingsStore.s,this.id=i,this.element=f,v&&(this.droppables=Ne(v)),this.element.classList.add("".concat(this.Settings.dropZoneClass)),this.DS.subscribe("Settings:updated:dropZoneClass",function(_){var x=_.settings;r.element&&(r.element.classList.remove(x["dropZoneClass:pre"]),r.element.classList.add(x.dropZoneClass))}),this._observers=ae(this.parentNodes,yt(function(){return r._rect=null},this.Settings.refreshMemoryRate)),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop)}return g(d,[{key:"destroy",value:function(){var r=this;this._observers.cleanup(),this.element.classList.remove("".concat(this.Settings.dropZoneClass)),this.element.classList.remove("".concat(this.Settings.dropZoneTargetClass)),this.element.classList.remove("".concat(this.Settings.dropZoneReadyClass)),this.droppables.forEach(function(p){p.classList.remove("".concat(r.Settings.droppedTargetClass)),p.classList.remove("".concat(r.Settings.droppedTargetClass,"-").concat(r.id)),p.classList.remove("".concat(r.Settings.droppableClass)),p.classList.remove("".concat(r.Settings.droppableClass,"-").concat(r.id))}),this.DS.unsubscribe("Interaction:start",this.start),this.DS.unsubscribe("Interaction:end",this.stop),this.element=null,this.droppables=null,this.id=null,this._itemsDropped=null,this._itemsInside=null,this.isDestroyed=!0}},{key:"rect",get:function(){return this.isDestroyed?null:this._rect?this._rect:this._rect=this.element.getBoundingClientRect()}},{key:"itemsDropped",get:function(){return this.isDestroyed?null:this._itemsDropped}},{key:"itemsInside",get:function(){var r=this;return this.isDestroyed?null:this._itemsInside?this._itemsInside:(this._itemsInside=this.droppables.flatMap(function(p){return Re(r.DS.SelectableSet.rects.get(p),r.rect,r.Settings.dropInsideThreshold)?[p]:[]}),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){return r._itemsInside=null},this.Settings.refreshMemoryRate),this._itemsInside)}},{key:"parentNodes",get:function(){return this._parentNodes?this._parentNodes:this._parentNodes=So(this.element)}},{key:"droppables",get:function(){return this._droppables?this._droppables:this.DS.SelectableSet.elements},set:function(r){this._droppables=r}}]),d}(),Ud=g(function d(h){var r=this,p=h.DS;a(this,d),c(this,"_zoneByElement",new Map),c(this,"_zoneById",new Map),c(this,"_zonesByDroppable",new Map),c(this,"_zones",void 0),c(this,"setDropZones",function(i){var f=i.dropZones;f&&(r._zones&&r._zones.forEach(function(v){return v.destroy()}),r._zones=f.map(function(v){return new Hd(l({DS:r.DS},v))}),r._zones.forEach(function(v){r._zoneByElement.set(v.element,v),r._zoneById.set(v.id,v),v.droppables.forEach(function(_){var x=r._zonesByDroppable.get(_);if(!(x!=null&&x.length))return r._zonesByDroppable.set(_,[v]);r._zonesByDroppable.set(_,w(new Set([].concat(w(x),[v]))))})}))}),c(this,"_handleDrop",function(i){r._zones.forEach(function(f){f!==i&&f.handleNoDrop()}),i&&i.handleDrop()}),c(this,"_getZoneByElementsFromPoint",function(i,f){for(var v=f.x,_=f.y,x=0,I=i.length;x<I;x++){var z=r._zoneByElement.get(i[x]);if(z&&Re(z.rect,{left:v,right:v,top:_,bottom:_},Math.min(r.Settings.dropTargetThreshold,.5)))return z}}),c(this,"stop",function(i){var f=i.isDragging;if(f){var v=r.getTarget();r._handleDrop(v)}}),c(this,"getItemsDroppedById",function(i){var f=r._zoneById.get(i);return f?f.itemsDropped:console.warn("[DragSelect] No zone found (id: ".concat(i,")"))}),c(this,"getItemsInsideById",function(i,f){var v=r._zoneById.get(i);if(!v)return console.warn("[DragSelect] No zone found (id: ".concat(i,")"));var _=v.itemsInside;return f&&v.handleItemsInsideClasses(),_}),c(this,"getTarget",function(i){var f;if((f=r._zones)!==null&&f!==void 0&&f.length){var v=(i==null?void 0:i.x)||r.DS.stores.PointerStore.currentVal.x,_=(i==null?void 0:i.y)||r.DS.stores.PointerStore.currentVal.y,x=document.elementsFromPoint(v,_);return r._getZoneByElementsFromPoint(x,{x:v,y:_})}}),this.DS=p,this.Settings=p.stores.SettingsStore.s,this.DS.subscribe("Settings:updated:dropZones",function(i){var f=i.settings;return r.setDropZones(f)}),this.setDropZones({dropZones:this.DS.stores.SettingsStore.s.dropZones}),this.DS.subscribe("Interaction:end",this.stop)}),Fd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"isInteracting",void 0),c(this,"isDragging",void 0),c(this,"init",function(){return r.DS.publish("Interaction:init:pre",{})}),c(this,"_init",function(){r.stop(),r.Settings.usePointerEvents?r.DS.Area.HTMLNode.addEventListener("pointerdown",r.start,{passive:!1}):r.DS.Area.HTMLNode.addEventListener("mousedown",r.start),r.DS.Area.HTMLNode.addEventListener("touchstart",r.start,{passive:!1}),r.DS.publish("Interaction:init",{})}),c(this,"start",function(i){return r.DS.publish("Interaction:start:pre",{event:i,isDragging:r.isDragging})}),c(this,"_start",function(i){i.type==="touchstart"&&i.preventDefault(),r._canInteract(i)&&(r.isInteracting=!0,r.isDragging=r.isDragEvent(i),r.DS.publish("Interaction:start",{event:i,isDragging:r.isDragging}),r.Settings.usePointerEvents?(document.addEventListener("pointerup",r.reset),document.addEventListener("pointercancel",r.reset)):document.addEventListener("mouseup",r.reset),document.addEventListener("touchend",r.reset))}),c(this,"isDragEvent",function(i){var f=i.target.closest(".".concat(r.Settings.selectableClass));return!r.Settings.draggability||r.DS.stores.KeyStore.isMultiSelectKeyPressed(i)||!f?!1:(r.Settings.immediateDrag&&(r.DS.SelectedSet.size?r.DS.SelectedSet.has(f)||(r.DS.SelectedSet.clear(),r.DS.SelectedSet.add(f)):r.DS.SelectedSet.add(f)),!!r.DS.SelectedSet.has(f))}),c(this,"onClick",function(i){var f=i.event;if(r._canInteract(f)&&!(f.detail>0)){var v=r.DS,_=v.stores,x=_.PointerStore,I=_.KeyStore,z=v.SelectableSet,G=v.SelectedSet;x.start(f);var de=f.target;z.has(de)&&(I.isMultiSelectKeyPressed(f)||G.clear(),G.toggle(de),r.reset())}}),c(this,"stop",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.DS.Area.HTMLNode;r.isInteracting=!1,r.isDragging=!1,r.Settings.usePointerEvents?(i.removeEventListener("pointerdown",r.start,{passive:!1}),document.removeEventListener("pointerup",r.reset),document.removeEventListener("pointercancel",r.reset)):(i.removeEventListener("mousedown",r.start),document.removeEventListener("mouseup",r.reset)),i.removeEventListener("touchstart",r.start,{passive:!1}),document.removeEventListener("touchend",r.reset)}),c(this,"update",function(i){var f=i.event,v=i.scroll_directions,_=i.scroll_multiplier;r.isInteracting&&r.DS.publish(["Interaction:update:pre","Interaction:update"],{event:f,scroll_directions:v,scroll_multiplier:_,isDragging:r.isDragging})}),c(this,"reset",function(i){return r.DS.publish("Interaction:end:pre",{event:i,isDragging:r.isDragging})}),c(this,"_reset",function(i){var f=r.isDragging;r.stop(),r.init(),r.DS.publish("Interaction:end",{event:i,isDragging:f})}),this.DS=p,this.Settings=p.stores.SettingsStore.s,this.DS.subscribe("Settings:updated:area",function(i){var f=i.settings;r.stop(f["area:pre"]),r.init()}),this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",function(i){var f=i.event;return r.start(f)}),this.DS.subscribe("Interaction:start:pre",function(i){var f=i.event;return r._start(f)}),this.DS.subscribe("Interaction:init:pre",this._init),this.DS.subscribe("Interaction:end:pre",function(i){var f=i.event;return r._reset(f)}),this.DS.subscribe("Area:scroll",this.update)}return g(d,[{key:"_canInteract",value:function(r){var p=r.clientX===0&&r.clientY===0&&r.detail===0&&r.target;return!(r.button===2||this.isInteracting||r.target&&!this.DS.SelectorArea.isInside(r.target)||!p&&!this.DS.SelectorArea.isClicked(r))}}]),d}(),Kd=g(function d(h){var r=this,p=h.DS;a(this,d),c(this,"subscribers",{}),c(this,"subscribe",function(i,f){return Array.isArray(r.subscribers[i])||(r.subscribers[i]=[]),r.subscribers[i].push(f),r.subscribers[i].length-1}),c(this,"unsubscribe",function(i,f,v){v>=0?r.subscribers[i].splice(v,1):f&&(r.subscribers[i]=r.subscribers[i].filter(function(_){return _!==f}))}),c(this,"publish",function(i,f){Array.isArray(i)?i.forEach(function(v){return r._publish(v,f)}):r._publish(i,f)}),c(this,"_publish",function(i,f){var v=r.subscribers[i];Array.isArray(v)&&(i.includes(":pre")?r._handlePrePublish(v,f):r._handlePublish(v,f))}),c(this,"_handlePublish",function(i,f){for(var v=0,_=i.length;v<_;v++){if(r.DS.stopped)return;i[v](f)}}),c(this,"_handlePrePublish",function(i,f){for(var v=i.length;v--;){if(r.DS.stopped)return;i[v](f)}}),this.DS=p}),Yd=function(d){y(r,d);var h=T(r);function r(p){var i,f=p.DS;return a(this,r),i=h.call(this),c(D(i),"_rects",void 0),c(D(i),"_timeout",void 0),c(D(i),"init",function(){return Ne(i.Settings.selectables).forEach(function(v){return i.add(v)})}),c(D(i),"clear",function(){return i.forEach(function(v){return i.delete(v)})}),c(D(i),"_onClick",function(v){return i.DS.publish(["Selectable:click:pre","Selectable:click"],{event:v})}),c(D(i),"_onPointer",function(v){return i.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:v})}),c(D(i),"addAll",function(v){return v.forEach(function(_){return i.add(_)})}),c(D(i),"deleteAll",function(v){return v.forEach(function(_){return i.delete(_)})}),c(D(i),"getRect",function(v){return i._rects?i.rects.get(v):v.getBoundingClientRect()}),i.DS=f,i.Settings=f.stores.SettingsStore.s,i.DS.subscribe("Interaction:init",i.init),i.DS.PubSub.subscribe("Settings:updated:selectables",function(){i.clear(),i.init()}),i.DS.subscribe("Settings:updated:selectableClass",function(v){var _=v.settings;i.forEach(function(x){x.classList.remove(_["selectableClass:pre"]),x.classList.add(_.selectableClass)})}),i}return g(r,[{key:"add",value:function(i){if(L(m(r.prototype),"has",this).call(this,i))return this;var f={items:this.elements,item:i};return this.DS.publish("Selectable:added:pre",f),i.classList.add(this.Settings.selectableClass),i.addEventListener("click",this._onClick),this.Settings.usePointerEvents?i.addEventListener("pointerdown",this._onPointer,{passive:!1}):i.addEventListener("mousedown",this._onPointer),i.addEventListener("touchstart",this._onPointer,{passive:!1}),this.Settings.draggability&&!this.Settings.useTransform&&ko({computedStyle:window.getComputedStyle(i),node:i}),L(m(r.prototype),"add",this).call(this,i),this.DS.publish("Selectable:added",f),this}},{key:"delete",value:function(i){if(!L(m(r.prototype),"has",this).call(this,i))return!0;var f={items:this.elements,item:i};return this.DS.publish("Selectable:removed:pre",f),i.classList.remove(this.Settings.selectableClass),i.classList.remove(this.Settings.hoverClass),i.removeEventListener("click",this._onClick),this.Settings.usePointerEvents?i.removeEventListener("pointerdown",this._onPointer,{passive:!1}):i.removeEventListener("mousedown",this._onPointer),i.removeEventListener("touchstart",this._onPointer,{passive:!1}),L(m(r.prototype),"delete",this).call(this,i),this.DS.publish("Selectable:removed",f),!0}},{key:"elements",get:function(){return Array.from(this.values())}},{key:"rects",get:function(){var i=this;return this._rects?this._rects:(this._rects=new Map,this.forEach(function(f){return i._rects.set(f,f.getBoundingClientRect())}),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){return i._rects=null},this.Settings.refreshMemoryRate),this._rects)}}]),r}(N(Set)),Wd=function(d){y(r,d);var h=T(r);function r(p){var i,f=p.DS;return a(this,r),i=h.call(this),c(D(i),"clear",function(){return i.forEach(function(v){return i.delete(v)})}),c(D(i),"addAll",function(v){return v.forEach(function(_){return i.add(_)})}),c(D(i),"deleteAll",function(v){return v.forEach(function(_){return i.delete(_)})}),i.DS=f,i}return g(r,[{key:"add",value:function(i){if(L(m(r.prototype),"has",this).call(this,i))return this;var f={items:this.elements,item:i};return this.DS.publish("Selected:added:pre",f),L(m(r.prototype),"add",this).call(this,i),i.classList.add(this.DS.stores.SettingsStore.s.selectedClass),i.style.zIndex="".concat((parseInt(i.style.zIndex)||0)+1),this.DS.publish("Selected:added",f),this}},{key:"delete",value:function(i){if(!L(m(r.prototype),"has",this).call(this,i))return!0;var f={items:this.elements,item:i};this.DS.publish("Selected:removed:pre",f);var v=L(m(r.prototype),"delete",this).call(this,i);return i.classList.remove(this.DS.stores.SettingsStore.s.selectedClass),i.style.zIndex="".concat((parseInt(i.style.zIndex)||0)-1),this.DS.publish("Selected:removed",f),v}},{key:"toggle",value:function(i){return this.has(i)?this.delete(i):this.add(i),i}},{key:"elements",get:function(){return Array.from(this.values())}}]),r}(N(Set)),Xd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"_prevSelectedSet",void 0),c(this,"start",function(i){var f=i.event,v=i.isDragging;v||(r._storePrevious(f),r._handleInsideSelection(!0,f))}),c(this,"update",function(i){var f=i.isDragging;f||r.DS.continue||r._handleInsideSelection()}),c(this,"_handleInsideSelection",function(i,f){var v=r.DS,_=v.SelectableSet,x=v.SelectorArea,I=v.Selector,z=r.DS.stores.KeyStore.isMultiSelectKeyPressed(f)&&r.Settings.multiSelectToggling,G=r.Settings.selectionThreshold,de=_.rects,he=I.rect,be=new Map,Z=new Map,ne=re(de),tt;try{for(ne.s();!(tt=ne.n()).done;){var vt=R(tt.value,2),rt=vt[0],St=vt[1];x.isInside(rt,St)&&(Re(St,he,G)?be.set(rt,St):Z.set(rt,St))}}catch(tr){ne.e(tr)}finally{ne.f()}if(!r.DS.continue){var Co=r.filterSelected({select:be,unselect:Z,selectorRect:he}),th=Co.select,rh=Co.unselect;th.forEach(function(tr,rr){return Ad({element:rr,force:i,multiSelectionToggle:z,SelectedSet:r.DS.SelectedSet,hoverClassName:r.Settings.hoverClass})}),rh.forEach(function(tr,rr){return Id({element:rr,force:i,SelectedSet:r.DS.SelectedSet,hoverClassName:r.Settings.hoverClass,PrevSelectedSet:r._prevSelectedSet})})}}),c(this,"filterSelected",function(i){var f=i.select,v=i.unselect;return i.selectorRect,{select:f,unselect:v}}),this.DS=p,this.Settings=this.DS.stores.SettingsStore.s,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return g(d,[{key:"_storePrevious",value:function(r){var p=this.DS,i=p.stores.KeyStore,f=p.SelectedSet;i.isMultiSelectKeyPressed(r)?this._prevSelectedSet=new Set(f):this._prevSelectedSet=new Set}}]),d}(),Zd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"_rect",void 0),c(this,"attachSelector",function(){var i,f;r.HTMLNode&&(i=r.DS.SelectorArea)!==null&&i!==void 0&&i.HTMLNode&&r.DS.SelectorArea.HTMLNode.removeChild(r.HTMLNode),r.HTMLNode=r.DS.stores.SettingsStore.s.selector||Qt(r.DS.stores.SettingsStore.s.customStyles),r.HTMLNode.classList.add(r.DS.stores.SettingsStore.s.selectorClass),r.HTMLNode&&(f=r.DS.SelectorArea)!==null&&f!==void 0&&f.HTMLNode&&r.DS.SelectorArea.HTMLNode.appendChild(r.HTMLNode)}),c(this,"start",function(i){var f=i.isDragging;if(!f){var v=r.DS.stores.PointerStore,_=v.initialValArea;Eo(r.HTMLNode,O(_,1)),r.HTMLNode.style.display="block",r._rect=null}}),c(this,"stop",function(){r.HTMLNode.style.width="0",r.HTMLNode.style.height="0",r.HTMLNode.style.display="none"}),c(this,"update",function(i){var f=i.isDragging;if(!(f||r.DS.continue)){var v=r.DS.stores,_=v.ScrollStore,x=v.PointerStore,I=Cd({scrollAmount:_.scrollAmount,initialPointerPos:x.initialValArea,pointerPos:x.currentValArea});Eo(r.HTMLNode,I),r._rect=null}}),this.DS=p,this.DS.subscribe("Settings:updated:selectorClass",function(i){var f=i.settings;r.HTMLNode.classList.remove(f["selectorClass:pre"]),r.HTMLNode.classList.add(f.selectorClass)}),this.DS.subscribe("Settings:updated:selector",this.attachSelector),this.DS.subscribe("Settings:updated:customStyles",this.attachSelector),this.attachSelector(),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return g(d,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),d}(),qd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"_scrollInterval",void 0),c(this,"_rect",void 0),c(this,"currentEdges",[]),c(this,"start",function(){r.applyElements("append"),r.updatePos()}),c(this,"applyElements",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"append",f=document.body?"body":"documentElement",v="".concat(i,"Child");r.HTMLNode[v](r.DS.Selector.HTMLNode),document[f][v](r.HTMLNode)}),c(this,"updatePos",function(){r._rect=null;var i=r.DS.Area.rect,f=r.DS.Area.computedBorder,v=r.HTMLNode.style,_="".concat(i.top+f.top,"px"),x="".concat(i.left+f.left,"px"),I="".concat(i.width,"px"),z="".concat(i.height,"px");v.top!==_&&(v.top=_),v.left!==x&&(v.left=x),v.width!==I&&(v.width=I),v.height!==z&&(v.height=z)}),c(this,"stop",function(i){r.stopAutoScroll(),i&&r.applyElements("remove")}),c(this,"startAutoScroll",function(){r.currentEdges=[],r._scrollInterval=setInterval(function(){return r.handleAutoScroll()},16)}),c(this,"handleAutoScroll",function(){if(!r.DS.continue){var i=r.DS,f=i.stores.PointerStore,v=i.Area;r.currentEdges=wo({elementRect:O(f.currentVal),containerRect:r.rect,tolerance:r.DS.stores.SettingsStore.s.overflowTolerance}),r.currentEdges.length&&v.scroll(r.currentEdges,r.DS.stores.SettingsStore.s.autoScrollSpeed)}}),c(this,"stopAutoScroll",function(){r.currentEdges=[],clearInterval(r._scrollInterval)}),c(this,"isInside",function(i,f){return r.DS.Area.HTMLNode.contains(i)&&r.DS.stores.ScrollStore.canScroll?!0:Re(r.rect,f||i.getBoundingClientRect())}),this.DS=p,this.HTMLNode=gt(),this.DS.subscribe("Settings:updated:selectorAreaClass",function(i){var f=i.settings;r.HTMLNode.classList.remove(f["selectorAreaClass:pre"]),r.HTMLNode.classList.add(f.selectorAreaClass)}),this.HTMLNode.classList.add(this.DS.stores.SettingsStore.s.selectorAreaClass),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",function(){r.updatePos(),r.stopAutoScroll()})}return g(d,[{key:"isClicked",value:function(r){var p=this.DS.stores.PointerStore,i=r?p.getPointerPosition(r):p.initialVal;return Re({left:i.x,top:i.y,right:i.x,bottom:i.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),d}(),Gd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"_currentValues",new Set),c(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),c(this,"init",function(){document.addEventListener("keydown",r.keydown),document.addEventListener("keyup",r.keyup),window.addEventListener("blur",r.reset)}),c(this,"keydown",function(i){var f=i.key.toLowerCase();r.DS.publish("KeyStore:down:pre",{event:i,key:f}),r._currentValues.add(f),r.DS.publish("KeyStore:down",{event:i,key:f})}),c(this,"keyup",function(i){var f=i.key.toLowerCase();r.DS.publish("KeyStore:up:pre",{event:i,key:f}),r._currentValues.delete(f),r.DS.publish("KeyStore:up",{event:i,key:f})}),c(this,"stop",function(){document.removeEventListener("keydown",r.keydown),document.removeEventListener("keyup",r.reset),window.removeEventListener("blur",r.reset),r.reset()}),c(this,"reset",function(){return r._currentValues.clear()}),this.DS=p,this.DS.subscribe("Interaction:init",this.init)}return g(d,[{key:"isMultiSelectKeyPressed",value:function(r){var p=this;if(this.DS.stores.SettingsStore.s.multiSelectMode)return!0;var i=this.DS.stores.SettingsStore.s.multiSelectKeys.map(function(f){return f.toLocaleLowerCase()});return!!(this.currentValues.some(function(f){return i.includes(f.toLocaleLowerCase())})||r&&i.some(function(f){return r[p._keyMapping[f]]}))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),d}(),Jd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"_isMouseInteraction",!1),c(this,"_initialValArea",void 0),c(this,"_currentValArea",void 0),c(this,"_lastValArea",void 0),c(this,"_initialVal",void 0),c(this,"_currentVal",void 0),c(this,"_lastVal",void 0),c(this,"_lastTouch",void 0),c(this,"init",function(){r.Settings.usePointerEvents?document.addEventListener("pointermove",r.update,{passive:!1}):document.addEventListener("mousemove",r.update),document.addEventListener("touchmove",r.update,{passive:!1})}),c(this,"getPointerPosition",function(i){return Nd({event:r._normalizedEvent(i)})}),c(this,"update",function(i){i&&(r.DS.publish("PointerStore:updated:pre",{event:i}),r.currentVal=r.getPointerPosition(i),r._isMouseInteraction&&r.DS.publish("PointerStore:updated",{event:i}))}),c(this,"stop",function(){r.Settings.usePointerEvents?document.removeEventListener("pointermove",r.update,{passive:!1}):document.removeEventListener("mousemove",r.update),document.removeEventListener("touchmove",r.update,{passive:!1}),setTimeout(function(){return r._isMouseInteraction=!1},100)}),c(this,"reset",function(i){i&&(r.currentVal=r.lastVal=r.getPointerPosition(i),r.stop(),r.init())}),this.DS=p,this.Settings=p.stores.SettingsStore.s,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(i){var f=i.event;return r.start(f)}),this.DS.subscribe("Interaction:end",function(i){var f=i.event;return r.reset(f)})}return g(d,[{key:"start",value:function(r){r&&(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(r))}},{key:"_normalizedEvent",value:function(r){return"touches"in r&&r.type!=="touchend"&&(this._lastTouch=r),"touches"in r?this._lastTouch.touches[0]:r}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(r){this._initialVal=r,this._initialValArea=r&&V(r,"-",V(K(this.DS.Area.rect),"+",K(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(r){this._currentVal=r,this._currentValArea=r&&V(r,"-",V(K(this.DS.Area.rect),"+",K(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(r){this._lastVal=r,this._lastValArea=r&&V(r,"-",V(K(this.DS.Area.rect),"+",K(this.DS.Area.computedBorder)))}}]),d}(),Qd=function(){function d(h){var r=this,p=h.DS;a(this,d),c(this,"_initialVal",void 0),c(this,"_currentVal",void 0),c(this,"_canScroll",void 0),c(this,"init",function(){return r.DS.stores.SettingsStore.s.area.addEventListener("scroll",r.update)}),c(this,"start",function(){r._currentVal=r._initialVal=bt(r.DS.stores.SettingsStore.s.area),r.DS.stores.SettingsStore.s.area.addEventListener("scroll",r.update)}),c(this,"update",function(){return r._currentVal=bt(r.DS.stores.SettingsStore.s.area)}),c(this,"stop",function(){r.DS.stores.SettingsStore.s.area.removeEventListener("scroll",r.update),r._initialVal={x:0,y:0},r._canScroll=null}),c(this,"reset",function(){r.stop(),r.start()}),this.DS=p,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(){return r.start()}),this.DS.subscribe("Interaction:end",function(){return r.reset()})}return g(d,[{key:"canScroll",get:function(){return typeof this._canScroll=="boolean"?this._canScroll:this._canScroll=pt(this.DS.stores.SettingsStore.s.area)}},{key:"scrollAmount",get:function(){var r=V(this.currentVal,"-",this.initialVal),p=ce(this.DS.stores.SettingsStore.s.zoom),i=V(V(r,"*",p),"-",r);return{x:r.x+i.x,y:r.y+i.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=bt(this.DS.stores.SettingsStore.s.area)),this._currentVal}}]),d}(),eh=g(function d(h){var r=this,p=h.DS,i=h.settings;a(this,d),c(this,"_settings",{}),c(this,"s",{}),c(this,"update",function(f){var v=f.settings,_=f.init;return r.DS.publish("Settings:updated:pre",l({settings:v},_?{init:_}:{}))}),c(this,"_update",function(f){for(var v=f.settings,_=f.init,x=Ld(v,_),I=function(){var he,be=R(G[z],2),Z=be[0],ne=be[1];Z in r._settings||Object.defineProperty(r.s,Z,{get:function(){return r._settings[Z]},set:function(rt){return r.update({settings:c({},Z,rt)})}}),r._settings["".concat(Z,":pre")]=r._settings[Z],r._settings[Z]=ne;var tt={settings:(he={},c(he,Z,r._settings[Z]),c(he,"".concat(Z,":pre"),r._settings["".concat(Z,":pre")]),he)};r.DS.publish("Settings:updated",tt),r.DS.publish("Settings:updated:".concat(Z),tt)},z=0,G=Object.entries(x);z<G.length;z++)I()}),this.DS=p,this.DS.subscribe("Settings:updated:pre",this._update),this.update({settings:i,init:!0})}),No=function(){function d(h){var r=this;a(this,d),c(this,"continue",!1),c(this,"start",function(){r.stopped=!1,r.Interaction.init()}),c(this,"break",function(){return r.continue=!0}),c(this,"setSettings",function(p){return r.stores.SettingsStore.update({settings:p})}),c(this,"getSelection",function(){return r.SelectedSet.elements}),c(this,"getSelectables",function(){return r.SelectableSet.elements}),c(this,"getInitialCursorPosition",function(){return r.stores.PointerStore.initialVal}),c(this,"getCurrentCursorPosition",function(){return r.stores.PointerStore.currentVal}),c(this,"getPreviousCursorPosition",function(){return r.stores.PointerStore.lastVal}),c(this,"getInitialCursorPositionArea",function(){return r.stores.PointerStore.initialValArea}),c(this,"getCurrentCursorPositionArea",function(){return r.stores.PointerStore.currentValArea}),c(this,"getPreviousCursorPositionArea",function(){return r.stores.PointerStore.lastValArea}),c(this,"isMultiSelect",function(p){return r.stores.KeyStore.isMultiSelectKeyPressed(p)}),c(this,"isDragging",function(){return r.Interaction.isDragging}),c(this,"getZoneByCoordinates",function(p){var i;return(i=r.DropZones.getTarget(p))===null||i===void 0?void 0:i.toObject()}),c(this,"getItemsDroppedByZoneId",function(p){return r.DropZones.getItemsDroppedById(p)}),c(this,"getItemsInsideByZoneId",function(p,i){return r.DropZones.getItemsInsideById(p,i)}),this.PubSub=new Kd({DS:this}),this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this.stores={},this.stores.SettingsStore=new eh({DS:this,settings:h}),this.stores.PointerStore=new Jd({DS:this}),this.stores.ScrollStore=new Qd({DS:this}),this.stores.KeyStore=new Gd({DS:this}),this.Area=new zd({DS:this}),this.Selector=new Zd({DS:this}),this.SelectorArea=new qd({DS:this}),this.SelectableSet=new Yd({DS:this}),this.SelectedSet=new Wd({DS:this}),this.Selection=new Xd({DS:this}),this.Drag=new Rd({DS:this}),this.DropZones=new Ud({DS:this}),this.Interaction=new Fd({DS:this}),Pd({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction,DropZones:this.DropZones}),this.subscribe("Interaction:end",function(){return r.continue=!1}),this.start()}return g(d,[{key:"stop",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;i&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(r),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),r&&this.SelectableSet.clear(),p&&this.SelectedSet.clear(),this.stopped=!0}},{key:"addSelection",value:function(r){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.addAll(Ne(r)),i||this.addSelectables(r),p&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(r){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.deleteAll(Ne(r)),i&&this.removeSelectables(r),p&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(r){var p=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Ne(r).forEach(function(v){return p.SelectedSet.has(v)?p.removeSelection(r,i,f):p.addSelection(r,i,f)}),i&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(r){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.clearSelection(),this.addSelection(r,p,i),this.getSelection()}},{key:"clearSelection",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.SelectedSet.clear(),r&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(r,p,i){var f=Ne(r);return this.SelectableSet.addAll(f),p&&this.SelectedSet.addAll(f),i&&this.PubSub.publish("callback",{items:this.getSelection()}),r}},{key:"setSelectables",value:function(r){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return console.warn('[DragSelect] DEPRECATION ".setSelectables" is deprecated and will be removed soon. Please use "ds.setSettings({ selectables: << new dom elements >> })" instead (see docs)'),this.removeSelectables(r,p),this.addSelectables(r,i)}},{key:"removeSelectables",value:function(r,p,i){return this.SelectableSet.deleteAll(Ne(r)),p&&this.removeSelection(r),i&&this.PubSub.publish("callback",{items:this.getSelection()}),r}}]),d}();return No.isCollision=Re,No})})(nr);var hn=nr.exports;const un=dn(hn),sr=(o,t,n,s,l)=>(t=Math,n=t.log,s=1024,l=n(o)/n(s)|0,o/t.pow(s,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"iB":"B"),ir=(o,t=null)=>new Date(o*1e3).toLocaleString(t??navigator.language??"en-US"),fn={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},mn=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)],pn={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},gn=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)],st=Object.assign({name:"VFSortIcon"},{props:{direction:String},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("div",null,[o.direction=="down"?(e.openBlock(),e.createElementBlock("svg",fn,mn)):e.createCommentVNode("",!0),o.direction=="up"?(e.openBlock(),e.createElementBlock("svg",pn,gn)):e.createCommentVNode("",!0)]))}}),yn=["onClick"],bn=Object.assign({name:"VFToast.vue"},{setup(o){const t=e.inject("emitter"),{getStore:n}=e.inject("storage"),s=e.ref(n("full-screen",!1)),l=c=>c=="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",a=e.ref([]),u=c=>{a.value.splice(c,1)},g=c=>{let y=a.value.findIndex(m=>m.id===c);y!==-1&&u(y)};return t.on("vf-toast-clear",()=>{a.value=[]}),t.on("vf-toast-push",c=>{let y=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");c.id=y,a.value.push(c),setTimeout(()=>{g(y)},5e3)}),(c,y)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([s.value.value?"fixed":"absolute","bottom-0 max-w-fit flex flex-col bottom-0 left-1/2 -translate-x-1/2"])},[e.createVNode(e.TransitionGroup,{name:"vf-toast-item","leave-active-class":"transition-all duration-1000","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(m,b)=>(e.openBlock(),e.createElementBlock("div",{onClick:S=>u(b),key:m,class:e.normalizeClass([l(m.type),"inline-block mx-auto my-0.5 py-0.5 px-2 min-w-max bg-gray-50 dark:bg-gray-600 border text-xs sm:text-sm rounded cursor-pointer"])},e.toDisplayString(m.label),11,yn))),128))]),_:1})],2))}}),Ce=o=>Object.entries(o).map(t=>t.map(encodeURIComponent).join("=")).join("&"),{apiUrl:vn}=ue(),wt=(o,t)=>vn.value+"?"+Ce({q:"preview",adapter:o,path:t}),_e=typeof window<"u",ar=_e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),lr=_e&&"IntersectionObserver"in window,cr=_e&&"classList"in document.createElement("p"),dr=_e&&window.devicePixelRatio>1,Sn={elements_selector:".lazy",container:ar||_e?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},hr=o=>Object.assign({},Sn,o),ur=function(o,t){let n;const s="LazyLoad::Initialized",l=new o(t);try{n=new CustomEvent(s,{detail:{instance:l}})}catch{n=document.createEvent("CustomEvent"),n.initCustomEvent(s,!1,!1,{instance:l})}window.dispatchEvent(n)},_n=(o,t)=>{if(t)if(!t.length)ur(o,t);else for(let n=0,s;s=t[n];n+=1)ur(o,s)},Se="src",xt="srcset",kt="sizes",fr="poster",He="llOriginalAttrs",mr="data",Dt="loading",pr="loaded",gr="applied",wn="entered",Et="error",yr="native",br="data-",vr="ll-status",J=(o,t)=>o.getAttribute(br+t),xn=(o,t,n)=>{const s=br+t;if(n===null){o.removeAttribute(s);return}o.setAttribute(s,n)},Ue=o=>J(o,vr),Ve=(o,t)=>xn(o,vr,t),it=o=>Ve(o,null),Nt=o=>Ue(o)===null,kn=o=>Ue(o)===Dt,Dn=o=>Ue(o)===Et,Ct=o=>Ue(o)===yr,En=[Dt,pr,gr,Et],Nn=o=>En.indexOf(Ue(o))>=0,we=(o,t,n,s)=>{if(!(!o||typeof o!="function")){if(s!==void 0){o(t,n,s);return}if(n!==void 0){o(t,n);return}o(t)}},Ae=(o,t)=>{if(cr){o.classList.add(t);return}o.className+=(o.className?" ":"")+t},fe=(o,t)=>{if(cr){o.classList.remove(t);return}o.className=o.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},Cn=o=>{o.llTempImage=document.createElement("IMG")},Vn=o=>{delete o.llTempImage},Sr=o=>o.llTempImage,at=(o,t)=>{if(!t)return;const n=t._observer;n&&n.unobserve(o)},Mn=o=>{o.disconnect()},Bn=(o,t,n)=>{t.unobserve_entered&&at(o,n)},Vt=(o,t)=>{o&&(o.loadingCount+=t)},$n=o=>{o&&(o.toLoadCount-=1)},_r=(o,t)=>{o&&(o.toLoadCount=t)},Tn=o=>o.loadingCount>0,An=o=>o.toLoadCount>0,wr=o=>{let t=[];for(let n=0,s;s=o.children[n];n+=1)s.tagName==="SOURCE"&&t.push(s);return t},Mt=(o,t)=>{const n=o.parentNode;if(!n||n.tagName!=="PICTURE")return;wr(n).forEach(t)},xr=(o,t)=>{wr(o).forEach(t)},lt=[Se],kr=[Se,fr],Fe=[Se,xt,kt],Dr=[mr],ct=o=>!!o[He],Er=o=>o[He],Nr=o=>delete o[He],Ie=(o,t)=>{if(ct(o))return;const n={};t.forEach(s=>{n[s]=o.getAttribute(s)}),o[He]=n},In=o=>{ct(o)||(o[He]={backgroundImage:o.style.backgroundImage})},Ln=(o,t,n)=>{if(!n){o.removeAttribute(t);return}o.setAttribute(t,n)},Me=(o,t)=>{if(!ct(o))return;const n=Er(o);t.forEach(s=>{Ln(o,s,n[s])})},On=o=>{if(!ct(o))return;const t=Er(o);o.style.backgroundImage=t.backgroundImage},Cr=(o,t,n)=>{Ae(o,t.class_applied),Ve(o,gr),n&&(t.unobserve_completed&&at(o,t),we(t.callback_applied,o,n))},Vr=(o,t,n)=>{Ae(o,t.class_loading),Ve(o,Dt),n&&(Vt(n,1),we(t.callback_loading,o,n))},xe=(o,t,n)=>{n&&o.setAttribute(t,n)},Mr=(o,t)=>{xe(o,kt,J(o,t.data_sizes)),xe(o,xt,J(o,t.data_srcset)),xe(o,Se,J(o,t.data_src))},jn=(o,t)=>{Mt(o,n=>{Ie(n,Fe),Mr(n,t)}),Ie(o,Fe),Mr(o,t)},Pn=(o,t)=>{Ie(o,lt),xe(o,Se,J(o,t.data_src))},zn=(o,t)=>{xr(o,n=>{Ie(n,lt),xe(n,Se,J(n,t.data_src))}),Ie(o,kr),xe(o,fr,J(o,t.data_poster)),xe(o,Se,J(o,t.data_src)),o.load()},Rn=(o,t)=>{Ie(o,Dr),xe(o,mr,J(o,t.data_src))},Hn=(o,t,n)=>{const s=J(o,t.data_bg),l=J(o,t.data_bg_hidpi),a=dr&&l?l:s;a&&(o.style.backgroundImage=`url("${a}")`,Sr(o).setAttribute(Se,a),Vr(o,t,n))},Un=(o,t,n)=>{const s=J(o,t.data_bg_multi),l=J(o,t.data_bg_multi_hidpi),a=dr&&l?l:s;a&&(o.style.backgroundImage=a,Cr(o,t,n))},Fn=(o,t,n)=>{const s=J(o,t.data_bg_set);if(!s)return;const l=s.split("|");let a=l.map(u=>`image-set(${u})`);o.style.backgroundImage=a.join(),o.style.backgroundImage===""&&(a=l.map(u=>`-webkit-image-set(${u})`),o.style.backgroundImage=a.join()),Cr(o,t,n)},Br={IMG:jn,IFRAME:Pn,VIDEO:zn,OBJECT:Rn},Kn=(o,t)=>{const n=Br[o.tagName];n&&n(o,t)},Yn=(o,t,n)=>{const s=Br[o.tagName];s&&(s(o,t),Vr(o,t,n))},Wn=["IMG","IFRAME","VIDEO","OBJECT"],Xn=o=>Wn.indexOf(o.tagName)>-1,$r=(o,t)=>{t&&!Tn(t)&&!An(t)&&we(o.callback_finish,t)},Tr=(o,t,n)=>{o.addEventListener(t,n),o.llEvLisnrs[t]=n},Zn=(o,t,n)=>{o.removeEventListener(t,n)},Bt=o=>!!o.llEvLisnrs,qn=(o,t,n)=>{Bt(o)||(o.llEvLisnrs={});const s=o.tagName==="VIDEO"?"loadeddata":"load";Tr(o,s,t),Tr(o,"error",n)},$t=o=>{if(!Bt(o))return;const t=o.llEvLisnrs;for(let n in t){const s=t[n];Zn(o,n,s)}delete o.llEvLisnrs},Ar=(o,t,n)=>{Vn(o),Vt(n,-1),$n(n),fe(o,t.class_loading),t.unobserve_completed&&at(o,n)},Gn=(o,t,n,s)=>{const l=Ct(t);Ar(t,n,s),Ae(t,n.class_loaded),Ve(t,pr),we(n.callback_loaded,t,s),l||$r(n,s)},Jn=(o,t,n,s)=>{const l=Ct(t);Ar(t,n,s),Ae(t,n.class_error),Ve(t,Et),we(n.callback_error,t,s),n.restore_on_error&&Me(t,Fe),l||$r(n,s)},Tt=(o,t,n)=>{const s=Sr(o)||o;if(Bt(s))return;qn(s,u=>{Gn(u,o,t,n),$t(s)},u=>{Jn(u,o,t,n),$t(s)})},Qn=(o,t,n)=>{Cn(o),Tt(o,t,n),In(o),Hn(o,t,n),Un(o,t,n),Fn(o,t,n)},es=(o,t,n)=>{Tt(o,t,n),Yn(o,t,n)},At=(o,t,n)=>{Xn(o)?es(o,t,n):Qn(o,t,n)},ts=(o,t,n)=>{o.setAttribute("loading","lazy"),Tt(o,t,n),Kn(o,t),Ve(o,yr)},Ir=o=>{o.removeAttribute(Se),o.removeAttribute(xt),o.removeAttribute(kt)},rs=o=>{Mt(o,t=>{Ir(t)}),Ir(o)},Lr=o=>{Mt(o,t=>{Me(t,Fe)}),Me(o,Fe)},os={IMG:Lr,IFRAME:o=>{Me(o,lt)},VIDEO:o=>{xr(o,t=>{Me(t,lt)}),Me(o,kr),o.load()},OBJECT:o=>{Me(o,Dr)}},ns=o=>{const t=os[o.tagName];if(!t){On(o);return}t(o)},ss=(o,t)=>{Nt(o)||Ct(o)||(fe(o,t.class_entered),fe(o,t.class_exited),fe(o,t.class_applied),fe(o,t.class_loading),fe(o,t.class_loaded),fe(o,t.class_error))},is=(o,t)=>{ns(o),ss(o,t),it(o),Nr(o)},as=(o,t,n,s)=>{n.cancel_on_exit&&kn(o)&&o.tagName==="IMG"&&($t(o),rs(o),Lr(o),fe(o,n.class_loading),Vt(s,-1),it(o),we(n.callback_cancel,o,t,s))},ls=(o,t,n,s)=>{const l=Nn(o);Ve(o,wn),Ae(o,n.class_entered),fe(o,n.class_exited),Bn(o,n,s),we(n.callback_enter,o,t,s),!l&&At(o,n,s)},cs=(o,t,n,s)=>{Nt(o)||(Ae(o,n.class_exited),as(o,t,n,s),we(n.callback_exit,o,t,s))},ds=["IMG","IFRAME","VIDEO"],Or=o=>o.use_native&&"loading"in HTMLImageElement.prototype,hs=(o,t,n)=>{o.forEach(s=>{ds.indexOf(s.tagName)!==-1&&ts(s,t,n)}),_r(n,0)},us=o=>o.isIntersecting||o.intersectionRatio>0,fs=o=>({root:o.container===document?null:o.container,rootMargin:o.thresholds||o.threshold+"px"}),ms=(o,t,n)=>{o.forEach(s=>us(s)?ls(s.target,s,t,n):cs(s.target,s,t,n))},ps=(o,t)=>{t.forEach(n=>{o.observe(n)})},gs=(o,t)=>{Mn(o),ps(o,t)},ys=(o,t)=>{!lr||Or(o)||(t._observer=new IntersectionObserver(n=>{ms(n,o,t)},fs(o)))},jr=o=>Array.prototype.slice.call(o),dt=o=>o.container.querySelectorAll(o.elements_selector),bs=o=>jr(o).filter(Nt),vs=o=>Dn(o),Ss=o=>jr(o).filter(vs),Pr=(o,t)=>bs(o||dt(t)),_s=(o,t)=>{Ss(dt(o)).forEach(s=>{fe(s,o.class_error),it(s)}),t.update()},ws=(o,t)=>{_e&&(t._onlineHandler=()=>{_s(o,t)},window.addEventListener("online",t._onlineHandler))},xs=o=>{_e&&window.removeEventListener("online",o._onlineHandler)},Ke=function(o,t){const n=hr(o);this._settings=n,this.loadingCount=0,ys(n,this),ws(n,this),this.update(t)};Ke.prototype={update:function(o){const t=this._settings,n=Pr(o,t);if(_r(this,n.length),ar||!lr){this.loadAll(n);return}if(Or(t)){hs(n,t,this);return}gs(this._observer,n)},destroy:function(){this._observer&&this._observer.disconnect(),xs(this),dt(this._settings).forEach(o=>{Nr(o)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(o){const t=this._settings;Pr(o,t).forEach(s=>{at(s,this),At(s,t,this)})},restoreAll:function(){const o=this._settings;dt(o).forEach(t=>{is(t,o)})}},Ke.load=(o,t)=>{const n=hr(t);At(o,n)},Ke.resetStatus=o=>{it(o)},_e&&_n(Ke,window.lazyLoadOptions);const ks={class:"relative flex-auto flex flex-col overflow-hidden"},Ds={key:0,class:"grid grid-cols-12 border-b border-neutral-300 border-gray-200 dark:border-gray-700 text-xs select-none"},Es={class:"absolute"},Ns=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),Cs={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},Vs=["onDblclick","onContextmenu","data-type","data-item","data-index"],Ms={class:"grid grid-cols-12 items-center"},Bs={class:"flex col-span-7 items-center"},$s={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ts=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],As={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Is=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Ls={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},Os={class:"col-span-5 overflow-ellipsis overflow-hidden whitespace-nowrap"},js=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],Ps={class:"grid grid-cols-12 items-center"},zs={class:"flex col-span-7 items-center"},Rs={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Hs=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Us={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Fs=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Ks={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},Ys={class:"col-span-2 text-center"},Ws={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap"},Xs=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],Zs={class:"relative"},qs={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Gs=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Js=["data-src","alt"],Qs={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ei=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],ti={key:3,class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},ri={class:"break-all"},oi=Object.assign({name:"VFExplorer"},{props:{view:String,data:Object,search:Object},setup(o){const t=o,n=e.inject("emitter"),{setStore:s,getStore:l}=e.inject("storage"),a=e.inject("adapter"),u=C=>C==null?void 0:C.substring(0,3),g=C=>C.replace(/((?=([\w\W]{0,14}))([\w\W]{8,})([\w\W]{8,}))/,"$2..$4"),c=e.ref(null),y=e.ref(null),m=e.ref(0),b=e.ref(null),{t:S}=e.inject("i18n"),k=Math.floor(Math.random()*2**32),E=e.ref(l("full-screen",!1)),N=new Ke;n.on("vf-fullscreen-toggle",()=>{c.value.style.height=null,E.value=!E.value,s("full-screen",E.value)});const D=e.ref("");n.on("vf-search-query",({newQuery:C})=>{D.value=C,C?n.emit("vf-fetch",{params:{q:"search",adapter:t.data.adapter,path:t.data.dirname,filter:C},onSuccess:$=>{$.files.length||n.emit("vf-toast-push",{label:S("No search result found.")})}}):n.emit("vf-fetch",{params:{q:"index",adapter:t.data.adapter,path:t.data.dirname}})});let A=null;const T=()=>{A&&clearTimeout(A)},B=e.ref(!0),L=C=>{C.touches.length>1&&(B.value?(b.value.stop(),n.emit("vf-toast-push",{label:S("Drag&Drop: off")})):(b.value.start(),n.emit("vf-toast-push",{label:S("Drag&Drop: on")}),n.emit("vf-explorer-update")),B.value=!B.value)},R=C=>{A=setTimeout(()=>{const $=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:C.target.getBoundingClientRect().x,clientY:C.target.getBoundingClientRect().y});C.target.dispatchEvent($)},500)},w=C=>{C.type=="dir"?(n.emit("vf-search-exit"),n.emit("vf-fetch",{params:{q:"index",adapter:t.data.adapter,path:C.path}})):n.emit("vf-modal-show",{type:"preview",adapter:t.data.adapter,item:C})},M=e.reactive({active:!1,column:"",order:""}),H=(C=!0)=>{let $=[...t.data.files],V=M.column,K=M.order=="asc"?1:-1;if(!C)return $;const O=(ce,ae)=>typeof ce=="string"&&typeof ae=="string"?ce.toLowerCase().localeCompare(ae.toLowerCase()):ce<ae?-1:ce>ae?1:0;return M.active&&($=$.slice().sort((ce,ae)=>O(ce[V],ae[V])*K)),$},X=C=>{M.active&&M.column==C?(M.active=M.order=="asc",M.column=C,M.order="desc"):(M.active=!0,M.column=C,M.order="asc")},W=()=>b.value.getSelection().map(C=>JSON.parse(C.dataset.item)),te=(C,$)=>{if(C.altKey||C.ctrlKey||C.metaKey)return C.preventDefault(),!1;C.dataTransfer.setDragImage(y.value,0,15),C.dataTransfer.effectAllowed="all",C.dataTransfer.dropEffect="copy",C.dataTransfer.setData("items",JSON.stringify(W()))},ie=(C,$)=>{C.preventDefault();let V=JSON.parse(C.dataTransfer.getData("items"));if(V.find(K=>K.storage!=a.value)){alert("Moving items between different storages is not supported yet.");return}n.emit("vf-modal-show",{type:"move",items:{from:V,to:$}})},oe=(C,$)=>{C.preventDefault(),!$||$.type!=="dir"||b.value.getSelection().find(V=>V==C.currentTarget)?(C.dataTransfer.dropEffect="none",C.dataTransfer.effectAllowed="none"):C.dataTransfer.dropEffect="copy"},re=()=>{b.value=new un({area:c.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),n.on("vf-explorer-update",()=>e.nextTick(()=>{b.value.clearSelection(),b.value.setSelectables(document.getElementsByClassName("vf-item-"+k))})),b.value.subscribe("predragstart",({event:C,isDragging:$})=>{if($)m.value=b.value.getSelection().length,b.value.break();else{const V=C.target.offsetWidth-C.offsetX,K=C.target.offsetHeight-C.offsetY;V<15&&K<15&&(b.value.clearSelection(),b.value.break())}}),b.value.subscribe("predragmove",({isDragging:C})=>{C&&b.value.break()}),b.value.subscribe("callback",({items:C,event:$,isDragging:V})=>{n.emit("vf-nodes-selected",W()),m.value=b.value.getSelection().length})};return e.onMounted(re),e.onUpdated(()=>{b.value.Area.reset(),b.value.SelectorArea.updatePos(),N.update()}),e.onMounted(()=>{e.watch(()=>t.view,()=>n.emit("vf-explorer-update"))}),(C,$)=>(e.openBlock(),e.createElementBlock("div",ks,[o.view=="list"||D.value.length?(e.openBlock(),e.createElementBlock("div",Ds,[e.createElementVNode("div",{onClick:$[0]||($[0]=V=>X("basename")),class:"col-span-7 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center pl-1"},[e.createTextVNode(e.toDisplayString(e.unref(S)("Name"))+" ",1),e.withDirectives(e.createVNode(st,{direction:M.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,M.active&&M.column=="basename"]])]),D.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:$[1]||($[1]=V=>X("file_size")),class:"col-span-2 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l border-r dark:border-gray-700"},[e.createTextVNode(e.toDisplayString(e.unref(S)("Size"))+" ",1),e.withDirectives(e.createVNode(st,{direction:M.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,M.active&&M.column=="file_size"]])])),D.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:$[2]||($[2]=V=>X("last_modified")),class:"col-span-3 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center"},[e.createTextVNode(e.toDisplayString(e.unref(S)("Date"))+" ",1),e.withDirectives(e.createVNode(st,{direction:M.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,M.active&&M.column=="last_modified"]])])),D.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:$[3]||($[3]=V=>X("path")),class:"col-span-5 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l dark:border-gray-700"},[e.createTextVNode(e.toDisplayString(e.unref(S)("Filepath"))+" ",1),e.withDirectives(e.createVNode(st,{direction:M.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,M.active&&M.column=="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",Es,[e.createElementVNode("div",{ref_key:"dragImage",ref:y,class:"absolute -z-50 -top-96"},[Ns,e.createElementVNode("div",Cs,e.toDisplayString(m.value),1)],512)]),e.createElementVNode("div",{onTouchstart:L,onContextmenu:$[10]||($[10]=e.withModifiers(V=>e.unref(n).emit("vf-contextmenu-show",{event:V,area:c.value,items:W()}),["self","prevent"])),class:e.normalizeClass([E.value?"":"resize-y","h-full w-full text-xs vf-selector-area min-h-[150px] overflow-auto p-1 z-0"]),ref_key:"selectorArea",ref:c},[D.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(H(),(V,K)=>(e.openBlock(),e.createElementBlock("div",{onDblclick:O=>w(V),onTouchstart:$[4]||($[4]=O=>R(O)),onTouchend:$[5]||($[5]=O=>T()),onContextmenu:e.withModifiers(O=>e.unref(n).emit("vf-contextmenu-show",{event:O,area:c.value,items:W(),target:V}),["prevent"]),class:e.normalizeClass(["vf-item-"+e.unref(k),"grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none"]),"data-type":V.type,"data-item":JSON.stringify(V),"data-index":K},[e.createElementVNode("div",Ms,[e.createElementVNode("div",Bs,[V.type=="dir"?(e.openBlock(),e.createElementBlock("svg",$s,Ts)):(e.openBlock(),e.createElementBlock("svg",As,Is)),e.createElementVNode("span",Ls,e.toDisplayString(V.basename),1)]),e.createElementVNode("div",Os,e.toDisplayString(V.path),1)])],42,Vs))),256)):e.createCommentVNode("",!0),o.view=="list"&&!D.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(H(),(V,K)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:O=>w(V),onTouchstart:$[6]||($[6]=O=>R(O)),onTouchend:$[7]||($[7]=O=>T()),onContextmenu:e.withModifiers(O=>e.unref(n).emit("vf-contextmenu-show",{event:O,area:c.value,items:W(),target:V}),["prevent"]),onDragstart:O=>te(O),onDragover:O=>oe(O,V),onDrop:O=>ie(O,V),class:e.normalizeClass(["vf-item-"+e.unref(k),"grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none"]),"data-type":V.type,"data-item":JSON.stringify(V),"data-index":K},[e.createElementVNode("div",Ps,[e.createElementVNode("div",zs,[V.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Rs,Hs)):(e.openBlock(),e.createElementBlock("svg",Us,Fs)),e.createElementVNode("span",Ks,e.toDisplayString(V.basename),1)]),e.createElementVNode("div",Ys,e.toDisplayString(V.file_size?e.unref(sr)(V.file_size):""),1),e.createElementVNode("div",Ws,e.toDisplayString(e.unref(ir)(V.last_modified)),1)])],42,js))),256)):e.createCommentVNode("",!0),o.view=="grid"&&!D.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(H(!1),(V,K)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:O=>w(V),onTouchstart:$[8]||($[8]=O=>R(O)),onTouchend:$[9]||($[9]=O=>T()),onContextmenu:e.withModifiers(O=>e.unref(n).emit("vf-contextmenu-show",{event:O,area:c.value,items:W(),target:V}),["prevent"]),onDragstart:O=>te(O),onDragover:O=>oe(O,V),onDrop:O=>ie(O,V),class:e.normalizeClass(["vf-item-"+e.unref(k),"border border-transparent hover:bg-neutral-50 m-1 dark:hover:bg-gray-700 inline-flex w-[5.5rem] h-20 md:w-24 text-center justify-center select-none"]),"data-type":V.type,"data-item":JSON.stringify(V),"data-index":K},[e.createElementVNode("div",null,[e.createElementVNode("div",Zs,[V.type=="dir"?(e.openBlock(),e.createElementBlock("svg",qs,Gs)):(V.mime_type??"").startsWith("image")?(e.openBlock(),e.createElementBlock("img",{key:1,class:"lazy h-10 md:h-12 m-auto","data-src":e.unref(wt)(e.unref(a).value,V.path),alt:V.basename},null,8,Js)):(e.openBlock(),e.createElementBlock("svg",Qs,ei)),!(V.mime_type??"").startsWith("image")&&V.type!="dir"?(e.openBlock(),e.createElementBlock("div",ti,e.toDisplayString(u(V.extension)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",ri,e.toDisplayString(g(V.basename)),1)])],42,Xs))),256)):e.createCommentVNode("",!0)],34),e.createVNode(bn)]))}}),ni="1.2.0",si={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},ii={class:"flex leading-5 items-center"},ai=["aria-label"],li=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})],-1)],ci=["value"],di={class:"ml-3"},hi={key:0},ui={class:"ml-1"},fi={class:"flex leading-5 items-center"},mi={value:"",disabled:""},pi=e.createElementVNode("option",{value:"ch"},"",-1),gi=e.createElementVNode("option",{value:"en"},"English",-1),yi=["aria-label"],bi=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 stroke-slate-500 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)],vi=Object.assign({name:"VFStatusbar"},{props:{data:Object},setup(o){const t=e.inject("emitter"),{getStore:n,setStore:s}=e.inject("storage"),l=e.ref(0),a=e.inject("adapter"),{t:u,changeLocale:g}=e.inject("i18n"),c=e.ref(n("locale","")),y=()=>{t.emit("vf-search-exit"),t.emit("vf-fetch",{params:{q:"index",adapter:a.value}}),s("adapter",a.value)};t.on("vf-nodes-selected",b=>{l.value=b.length});const m=e.ref("");return t.on("vf-search-query",({newQuery:b})=>{m.value=b}),(b,S)=>(e.openBlock(),e.createElementBlock("div",si,[e.createElementVNode("div",ii,[e.createElementVNode("div",{class:"mx-2","aria-label":e.unref(u)("Storage"),"data-microtip-position":"top-right",role:"tooltip"},li,8,ai),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":S[0]||(S[0]=k=>e.isRef(a)?a.value=k:null),onChange:y,class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.data.storages,k=>(e.openBlock(),e.createElementBlock("option",{value:k},e.toDisplayString(k),9,ci))),256))],544),[[e.vModelSelect,e.unref(a)]]),e.createElementVNode("div",di,[m.value.length?(e.openBlock(),e.createElementBlock("span",hi,e.toDisplayString(o.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",ui,e.toDisplayString(l.value>0?l.value+" "+e.unref(u)("item(s) selected."):""),1)])]),e.createElementVNode("div",fi,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":S[1]||(S[1]=k=>c.value=k),onChange:S[2]||(S[2]=k=>e.unref(g)(k.target.value)),class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8 mr-3"},[e.createElementVNode("option",mi,e.toDisplayString(e.unref(u)("Language")),1),pi,gi],544),[[e.vModelSelect,c.value]]),e.createElementVNode("span",{class:"mr-1","aria-label":e.unref(u)("About"),"data-microtip-position":"top-left",role:"tooltip",onClick:S[3]||(S[3]=k=>e.unref(t).emit("vf-modal-show",{type:"message",title:"Vuefinder "+e.unref(ni),message:e.unref(u)("Vuefinder is a file manager component for vue 3.")}))},bi,8,yi)])]))}}),Si=(o,t=0,n=!1)=>{let s;return(...l)=>{n&&!s&&o(...l),clearTimeout(s),s=setTimeout(()=>{o(...l)},t)}},_i=(o,t,n)=>{const s=e.ref(o);return e.customRef((a,u)=>({get(){return a(),s.value},set:Si(g=>{s.value=g,u()},t,n)}))},wi={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none text-xs"},xi=["aria-label"],ki=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)],Di=["aria-label"],Ei=[e.createElementVNode("path",{d:"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"},null,-1)],Ni=["aria-label"],Ci=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)],Vi=["onClick"],Mi=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},null,-1)],Bi={class:"flex leading-5"},$i=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),Ti=["title","onClick"],Ai={key:0,class:"animate-spin p-1 h-6 w-6 text-white ml-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ii=[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)],Li={key:3,class:"relative flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full"},Oi=e.createElementVNode("svg",{class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),ji=e.createElementVNode("div",{class:"w-full"},null,-1),Pi=["onKeydown","placeholder"],zi=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)],Ri=Object.assign({name:"VFBreadcrumb"},{props:{data:Object},setup(o){const t=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),s=e.ref(null),l=e.ref([]),a=e.ref(!1),u=e.ref(null),g=o,{t:c}=e.inject("i18n"),y=e.inject("loadingState");t.on("vf-explorer-update",()=>{let T=[],B=[];s.value=g.data.dirname??n.value+"://",s.value.length==0&&(l.value=[]),s.value.replace(n.value+"://","").split("/").forEach(function(L){T.push(L),T.join("/")!=""&&B.push({basename:L,name:L,path:n.value+"://"+T.join("/"),type:"dir"})}),B.length>4&&(B=B.slice(-5),B[0].name=".."),l.value=B});const m=()=>{a.value=!1,S.value=""};t.on("vf-search-exit",()=>{m()});const b=()=>{a.value=!0,e.nextTick(()=>u.value.focus())},S=_i("",400),k=()=>y.value;e.watch(S,T=>{t.emit("vf-toast-clear"),t.emit("vf-search-query",{newQuery:T})});const E=()=>l.value.length&&!a.value,N=T=>{T.preventDefault();let B=JSON.parse(T.dataTransfer.getData("items"));if(B.find(L=>L.storage!=n.value)){alert("Moving items between different storages is not supported yet.");return}t.emit("vf-modal-show",{type:"move",items:{from:B,to:l.value[l.value.length-2]??{path:n.value+"://"}}})},D=T=>{T.preventDefault(),E()?T.dataTransfer.dropEffect="copy":(T.dataTransfer.dropEffect="none",T.dataTransfer.effectAllowed="none")},A=()=>{S.value==""&&m()};return(T,B)=>(e.openBlock(),e.createElementBlock("div",wi,[e.createElementVNode("span",{"aria-label":e.unref(c)("Go up a directory"),"data-microtip-position":"bottom-right",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onDragover:B[0]||(B[0]=L=>D(L)),onDrop:B[1]||(B[1]=L=>N(L)),onClick:B[2]||(B[2]=L=>{var R;return!E()||e.unref(t).emit("vf-fetch",{params:{q:"index",adapter:o.data.adapter,path:((R=l.value[l.value.length-2])==null?void 0:R.path)??e.unref(n)+"://"}})}),class:e.normalizeClass(["h-6 w-6 p-0.5 rounded",E()?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ki,34))],8,xi),k()?(e.openBlock(),e.createElementBlock("span",{key:1,"aria-label":e.unref(c)("Cancel"),"data-microtip-position":"bottom-right",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onClick:B[4]||(B[4]=L=>e.unref(t).emit("vf-fetch-abort")),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer"},Ci))],8,Ni)):(e.openBlock(),e.createElementBlock("span",{key:0,"aria-label":e.unref(c)("Refresh"),"data-microtip-position":"bottom-right",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onClick:B[3]||(B[3]=L=>{e.unref(t).emit("vf-fetch",{params:{q:"index",adapter:o.data.adapter,path:o.data.dirname}})}),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"-40 -40 580 580",fill:"currentColor"},Ei))],8,Di)),a.value?(e.openBlock(),e.createElementBlock("div",Li,[Oi,ji,e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:u,onKeydown:e.withKeys(m,["esc"]),onBlur:A,"onUpdate:modelValue":B[6]||(B[6]=L=>e.isRef(S)?S.value=L:null),placeholder:e.unref(c)("Search anything.."),class:"absolute ml-4 pt-1 pb-0 px-2 border-0 ring-0 outline-0 text-gray-600 focus:ring-transparent focus:border-transparent dark:focus:ring-transparent dark:focus:border-transparent dark:text-gray-300 bg-transparent",type:"text"},null,40,Pi),[[e.vModelText,e.unref(S)]]),(e.openBlock(),e.createElementBlock("svg",{class:"w-6 h-6 cursor-pointer",onClick:m,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},zi))])):(e.openBlock(),e.createElementBlock("div",{key:2,class:"group flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full",onClick:e.withModifiers(b,["self"])},[(e.openBlock(),e.createElementBlock("svg",{onClick:B[5]||(B[5]=L=>e.unref(t).emit("vf-fetch",{params:{q:"index",adapter:o.data.adapter}})),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Mi)),e.createElementVNode("div",Bi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(L,R)=>(e.openBlock(),e.createElementBlock("div",{key:R},[$i,e.createElementVNode("span",{class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer",title:L.basename,onClick:w=>e.unref(t).emit("vf-fetch",{params:{q:"index",adapter:o.data.adapter,path:L.path}})},e.toDisplayString(L.name),9,Ti)]))),128))]),k()?(e.openBlock(),e.createElementBlock("svg",Ai,Ii)):e.createCommentVNode("",!0)],8,Vi))]))}}),Hi=["onClick"],Ui=e.createElementVNode("span",{class:"px-1"},null,-1),Fi=Object.assign({name:"VFContextMenu"},{props:{current:Object},setup(o){const t=e.inject("emitter"),n=e.ref(null),{apiUrl:s}=ue(),l=o,a=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),u=e.ref([]);t.on("vf-context-selected",S=>{u.value=S});const{t:g}=e.inject("i18n"),c={newfolder:{title:()=>g("New Folder"),action:()=>{t.emit("vf-modal-show",{type:"new-folder"})}},delete:{title:()=>g("Delete"),action:()=>{t.emit("vf-modal-show",{type:"delete",items:u})}},refresh:{title:()=>g("Refresh"),action:()=>{t.emit("vf-fetch",{params:{q:"index",adapter:l.current.adapter,path:l.current.dirname}})}},preview:{title:()=>g("Preview"),action:()=>{t.emit("vf-modal-show",{type:"preview",adapter:l.current.adapter,item:u.value[0]})}},open:{title:()=>g("Open"),action:()=>{t.emit("vf-search-exit"),t.emit("vf-fetch",{params:{q:"index",adapter:l.current.adapter,path:u.value[0].path}})}},openDir:{title:()=>g("Open containing folder"),action:()=>{t.emit("vf-search-exit"),t.emit("vf-fetch",{params:{q:"index",adapter:l.current.adapter,path:u.value[0].dir}})}},download:{title:()=>g("Download"),action:()=>{const S=s.value+"?"+Ce({q:"download",adapter:l.current.adapter,path:u.value[0].path});t.emit("vf-download",S)}},archive:{title:()=>g("Archive"),action:()=>{t.emit("vf-modal-show",{type:"archive",items:u})}},unarchive:{title:()=>g("Unarchive"),action:()=>{t.emit("vf-modal-show",{type:"unarchive",items:u})}},rename:{title:()=>g("Rename"),action:()=>{t.emit("vf-modal-show",{type:"rename",items:u})}}},y=S=>{t.emit("vf-contextmenu-hide"),S.action()},m=e.ref("");t.on("vf-search-query",({newQuery:S})=>{m.value=S}),t.on("vf-contextmenu-show",({event:S,area:k,items:E,target:N=null})=>{if(a.items=[],m.value)if(N)a.items.push(c.openDir),t.emit("vf-context-selected",[N]);else return;else!N&&!m.value?(a.items.push(c.refresh),a.items.push(c.newfolder),t.emit("vf-context-selected",[])):E.length>1&&E.some(D=>D.path===N.path)?(a.items.push(c.refresh),a.items.push(c.archive),a.items.push(c.delete),t.emit("vf-context-selected",E)):(N.type=="dir"?a.items.push(c.open):(a.items.push(c.preview),a.items.push(c.download)),a.items.push(c.rename),N.mime_type=="application/zip"?a.items.push(c.unarchive):a.items.push(c.archive),a.items.push(c.delete),t.emit("vf-context-selected",[N]));b(S,k)}),t.on("vf-contextmenu-hide",()=>{a.active=!1});const b=(S,k)=>{a.active=!0,e.nextTick(()=>{let E=k.getBoundingClientRect(),N=S.pageX,D=S.pageY,A=n.value.offsetHeight,T=n.value.offsetWidth;N=E.right-S.pageX+window.scrollX<T?N-T:N,D=E.bottom-S.pageY+window.scrollY<A?D-A:D,a.positions={left:N+"px",top:D+"px"}})};return(S,k)=>a.active?(e.openBlock(),e.createElementBlock("ul",{key:0,class:"z-30 absolute text-xs bg-neutral-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded select-none",ref_key:"contextmenu",ref:n,style:e.normalizeStyle(a.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.items,E=>(e.openBlock(),e.createElementBlock("li",{class:"px-2 py-1.5 cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:E.title,onClick:N=>y(E)},[Ui,e.createElementVNode("span",null,e.toDisplayString(E.title()),1)],8,Hi))),128))],4)):e.createCommentVNode("",!0)}}),Ki=(o,t)=>{const n=o[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((s,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+t)))})};async function Yi(o){const t=await Ki(Object.assign({"../locales/ch.json":()=>Promise.resolve().then(()=>kd),"../locales/en.json":()=>Promise.resolve().then(()=>Dd)}),`../locales/${o}.json`);return JSON.parse(t.default)}function Wi(o,t,n){const{getStore:s,setStore:l}=_t(o),a=e.ref({}),u=y=>{Yi(y).then(m=>{a.value=m,l("locale",y),l("translations",m),n.emit("vf-toast-push",{label:"The language is set to "+y})}).catch(m=>{n.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),u("en")})};s("locale")?a.value=s("translations"):u(t);const g=(y,...m)=>m.length?g(y=y.replace("%s",m.shift()),...m):y;function c(y,...m){return a.value.hasOwnProperty(y)?g(a.value[y],...m):g(y,...m)}return{t:c,changeLocale:u}}const Xi={class:"vuefinder"},Zi=e.createElementVNode("iframe",{id:"download_frame",style:{display:"none"}},null,-1),qi=Object.assign({name:"VueFinder"},{props:{url:{type:[String]},id:{type:String,default:"vf"},dark:{type:Boolean,default:!1},locale:{type:String,default:"en"},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"},postData:{type:Object,default:{}}},setup(o){const t=o,n=Vo(),{setStore:s,getStore:l}=_t(t.id),a=e.ref(l("adapter"));e.provide("emitter",n),e.provide("storage",_t(t.id)),e.provide("postData",t.postData),e.provide("adapter",a),e.provide("maxFileSize",t.maxFileSize);const u=Wi(t.id,t.locale,n);e.provide("i18n",u);const{apiUrl:g,setApiUrl:c}=ue();c(t.url);const y=e.reactive({adapter:a.value,storages:[],dirname:".",files:[]}),m=e.ref(l("viewport","grid")),b=e.ref(l("darkMode",t.dark));n.on("vf-darkMode-toggle",()=>{b.value=!b.value,s("darkMode",b.value)});const S=e.ref(!1);e.provide("loadingState",S);const k=e.ref(l("full-screen",!1));n.on("vf-fullscreen-toggle",()=>{k.value=!k.value,s("full-screen",k.value)}),n.on("vf-view-toggle",A=>{m.value=A});const E=e.reactive({active:!1,type:"delete",data:{}});n.on("vf-modal-close",()=>{E.active=!1}),n.on("vf-modal-show",A=>{E.active=!0,E.type=A.type,E.data=A});const N=A=>{Object.assign(y,A),n.emit("vf-nodes-selected",{}),n.emit("vf-explorer-update")};let D;return n.on("vf-fetch-abort",()=>{D.abort(),S.value=!1}),n.on("vf-fetch",({params:A,onSuccess:T=null,onError:B=null})=>{["index","search"].includes(A.q)&&(D&&D.abort(),S.value=!0),D=new AbortController;const L=D.signal;nt(g.value,{params:A,signal:L}).then(R=>{a.value=R.adapter,["index","search"].includes(A.q)&&(S.value=!1),n.emit("vf-modal-close"),N(R),T(R)}).catch(R=>{B&&B(R)}).finally(()=>{})}),n.on("vf-download",A=>{document.getElementById("download_frame").src=A,n.emit("vf-modal-close")}),e.onMounted(()=>{n.emit("vf-fetch",{params:{q:"index",adapter:a.value}})}),(A,T)=>(e.openBlock(),e.createElementBlock("div",Xi,[e.createElementVNode("div",{class:e.normalizeClass(b.value?"dark":"")},[e.createElementVNode("div",{class:e.normalizeClass([k.value?"fixed w-screen inset-0 z-20":"relative rounded-md","border flex flex-col bg-white dark:bg-gray-800 text-gray-700 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 min-w-min select-none"]),style:e.normalizeStyle(k.value?"":"max-height: "+o.maxHeight),onMousedown:T[0]||(T[0]=B=>e.unref(n).emit("vf-contextmenu-hide")),onTouchstart:T[1]||(T[1]=B=>e.unref(n).emit("vf-contextmenu-hide"))},[e.createVNode(ln,{data:y},null,8,["data"]),e.createVNode(Ri,{data:y},null,8,["data"]),e.createVNode(oi,{view:m.value,data:y},null,8,["view","data"]),e.createVNode(vi,{data:y},null,8,["data"])],38),E.active?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("v-f-modal-"+E.type),{key:0,selection:E.data,current:y},null,8,["selection","current"])):e.createCommentVNode("",!0),e.createVNode(Fi,{current:y},null,8,["current"]),Zi],2)]))}}),Gi=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 dark:bg-gray-600 dark:bg-opacity-75 bg-opacity-75 transition-opacity"},null,-1),Ji={class:"fixed z-10 inset-0 overflow-hidden"},Qi={class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-4xl md:max-w-2xl lg:max-w-3xl xl:max-w-5xl w-full"},ea={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ta={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},me={__name:"ModalLayout",setup(o){const t=e.inject("emitter");return e.onMounted(()=>{const n=document.querySelector(".v-f-modal input");n&&n.focus()}),(n,s)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-30","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:s[1]||(s[1]=e.withKeys(l=>e.unref(t).emit("vf-modal-close"),["esc"])),tabindex:"0"},[Gi,e.createElementVNode("div",Ji,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:s[0]||(s[0]=e.withModifiers(l=>e.unref(t).emit("vf-modal-close"),["self"]))},[e.createElementVNode("div",Qi,[e.createElementVNode("div",ea,[e.renderSlot(n.$slots,"default")]),e.createElementVNode("div",ta,[e.renderSlot(n.$slots,"buttons")])])],32)])],32))}},ra=["aria-label"],oa=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)],pe=Object.assign({name:"Message"},{props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(o,{emit:t}){var c;const{t:n}=e.inject("i18n"),s=e.ref(!1),l=e.ref(null),a=e.ref((c=l.value)==null?void 0:c.strMessage),u=t;e.watch(a,()=>s.value=!1);const g=()=>{u("hidden"),s.value=!0};return(y,m)=>(e.openBlock(),e.createElementBlock("div",null,[s.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:l,class:e.normalizeClass(["flex mt-1 p-1 px-2 rounded text-sm",o.error?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"])},[e.renderSlot(y.$slots,"default"),e.createElementVNode("div",{class:"ml-auto cursor-pointer",onClick:g,"aria-label":e.unref(n)("Close"),"data-microtip-position":"top-left",role:"tooltip"},oa,8,ra)],2))]))}}),na={class:"sm:flex sm:items-start"},sa=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),ia={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},aa={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},la={class:"mt-2"},ca={class:"text-sm text-gray-500"},da={class:"flex text-sm text-gray-800 dark:text-gray-400"},ha={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ua=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],fa={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ma=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],pa={class:"ml-1.5"},ga={class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},ya=Object.assign({name:"VFModalDelete"},{props:{selection:Object,current:Object},setup(o){const t=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:s}=e.inject("i18n"),l=o,a=e.ref(l.selection.items),u=e.ref(""),g=()=>{a.value.length&&t.emit("vf-fetch",{params:{q:"delete",adapter:n.value,path:l.current.dirname,items:JSON.stringify(a.value.map(({path:c,type:y})=>({path:c,type:y})))},onSuccess:()=>{t.emit("vf-toast-push",{label:s("Files deleted.")})},onError:c=>{u.value=s(c.message)}})};return(c,y)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:g,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:y[1]||(y[1]=m=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Cancel")),1),e.createElementVNode("div",ga,e.toDisplayString(e.unref(s)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",na,[sa,e.createElementVNode("div",ia,[e.createElementVNode("h3",aa,e.toDisplayString(e.unref(s)("Delete files")),1),e.createElementVNode("div",la,[e.createElementVNode("p",ca,e.toDisplayString(e.unref(s)("Are you sure you want to delete these files?")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,m=>(e.openBlock(),e.createElementBlock("p",da,[m.type=="dir"?(e.openBlock(),e.createElementBlock("svg",ha,ua)):(e.openBlock(),e.createElementBlock("svg",fa,ma)),e.createElementVNode("span",pa,e.toDisplayString(m.basename),1)]))),256)),u.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:y[0]||(y[0]=m=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ba={class:"sm:flex sm:items-start"},va=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),Sa={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},_a={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},wa={class:"mt-2"},xa={class:"text-sm text-gray-500"},ka=Object.assign({name:"VFModalMessage"},{props:{selection:Object},setup(o){const t=e.inject("emitter"),{t:n}=e.inject("i18n");return(s,l)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:l[0]||(l[0]=a=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(n)("Close")),1)]),default:e.withCtx(()=>{var a,u;return[e.createElementVNode("div",ba,[va,e.createElementVNode("div",Sa,[e.createElementVNode("h3",_a,e.toDisplayString(((a=o.selection)==null?void 0:a.title)??"Title"),1),e.createElementVNode("div",wa,[e.createElementVNode("p",xa,e.toDisplayString(((u=o.selection)==null?void 0:u.message)??"Message")+".",1)])])])]}),_:1}))}}),Da={class:"sm:flex sm:items-start"},Ea=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),Na={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ca={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Va={class:"mt-2"},Ma={class:"text-sm text-gray-500"},Ba=["onKeyup","placeholder"],$a=Object.assign({name:"VFModalNewFolder"},{props:{selection:Object,current:Object},setup(o){const t=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:s}=e.inject("i18n"),l=o,a=e.ref(""),u=e.ref(""),g=()=>{a.value!=""&&t.emit("vf-fetch",{params:{q:"newfolder",adapter:n.value,path:l.current.dirname,name:a.value},onSuccess:()=>{t.emit("vf-toast-push",{label:s("%s is created.",a.value)})},onError:c=>{u.value=s(c.message)}})};return(c,y)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:g,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Create")),1),e.createElementVNode("button",{type:"button",onClick:y[2]||(y[2]=m=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Da,[Ea,e.createElementVNode("div",Na,[e.createElementVNode("h3",Ca,e.toDisplayString(e.unref(s)("New Folder")),1),e.createElementVNode("div",Va,[e.createElementVNode("p",Ma,e.toDisplayString(e.unref(s)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":y[0]||(y[0]=m=>a.value=m),onKeyup:e.withKeys(g,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(s)("Folder Name"),type:"text"},null,40,Ba),[[e.vModelText,a.value]]),u.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:y[1]||(y[1]=m=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Ta={class:"sm:flex sm:items-start"},Aa=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),Ia={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},La={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Oa={class:"mt-2"},ja={class:"text-sm text-gray-500"},Pa=["onKeyup","placeholder"],za=Object.assign({name:"VFModalNewFile"},{props:{selection:Object,current:Object},setup(o){const t=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:s}=e.inject("i18n"),l=o,a=e.ref(""),u=e.ref(""),g=()=>{a.value!=""&&t.emit("vf-fetch",{params:{q:"newfile",adapter:n.value,path:l.current.dirname,name:a.value},onSuccess:()=>{t.emit("vf-toast-push",{label:s("%s is created.",a.value)})},onError:c=>{u.value=s(c.message)}})};return(c,y)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:g,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Create")),1),e.createElementVNode("button",{type:"button",onClick:y[2]||(y[2]=m=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Ta,[Aa,e.createElementVNode("div",Ia,[e.createElementVNode("h3",La,e.toDisplayString(e.unref(s)("New File")),1),e.createElementVNode("div",Oa,[e.createElementVNode("p",ja,e.toDisplayString(e.unref(s)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":y[0]||(y[0]=m=>a.value=m),onKeyup:e.withKeys(g,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(s)("File Name"),type:"text"},null,40,Pa),[[e.vModelText,a.value]]),u.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:y[1]||(y[1]=m=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Ra={class:"flex"},Ha=["aria-label"],Ua={class:"ml-auto mb-2"},Fa={key:0,class:"p-2 border font-normal whitespace-pre-wrap border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[200px] max-h-[60vh] text-xs overflow-auto"},Ka={key:1},Ya={__name:"Text",props:{selection:Object},emits:["load"],setup(o,{emit:t}){const n=t,s=e.ref(""),l=e.ref(""),a=e.ref(null),u=e.ref(!1),{apiUrl:g}=ue(),c=o,y=e.ref(""),m=e.ref(!1),{t:b}=e.inject("i18n");e.onMounted(()=>{nt(g.value,{params:{q:"preview",adapter:c.selection.adapter,path:c.selection.item.path},json:!1}).then(N=>{s.value=N,n("load")})});const S=()=>{u.value=!u.value,l.value=s.value,u.value==!0&&e.nextTick(()=>{a.value.focus()})},k=e.inject("postData"),E=()=>{y.value="",m.value=!1,nt(g.value,{method:"POST",params:Object.assign(k,{q:"save",adapter:c.selection.adapter,path:c.selection.item.path,content:l.value}),json:!1}).then(N=>{y.value=b("Updated."),s.value=N,n("load"),u.value=!u.value}).catch(N=>{y.value=b(N.message),m.value=!0})};return(N,D)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Ra,[e.createElementVNode("div",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":o.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(o.selection.item.basename),9,Ha),e.createElementVNode("div",Ua,[u.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:E,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(b)("Save")),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:D[0]||(D[0]=A=>S())},e.toDisplayString(u.value?e.unref(b)("Cancel"):e.unref(b)("Edit")),1)])]),e.createElementVNode("div",null,[u.value?(e.openBlock(),e.createElementBlock("div",Ka,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:a,"onUpdate:modelValue":D[1]||(D[1]=A=>l.value=A),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 min-h-[200px] max-h-[60vh] text-xs",name:"text",id:"",cols:"30",rows:"10"},null,512),[[e.vModelText,l.value]])])):(e.openBlock(),e.createElementBlock("pre",Fa,e.toDisplayString(s.value),1)),y.value.length?(e.openBlock(),e.createBlock(pe,{key:2,onHidden:D[2]||(D[2]=A=>y.value=""),error:m.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(y.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])],64))}},Zh="";/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function zr(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),n.push.apply(n,s)}return n}function Rr(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zr(Object(n),!0).forEach(function(s){Za(o,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach(function(s){Object.defineProperty(o,s,Object.getOwnPropertyDescriptor(n,s))})}return o}function It(o){"@babel/helpers - typeof";return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(o)}function Wa(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(o,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,Fr(s.key),s)}}function Xa(o,t,n){return t&&Hr(o.prototype,t),n&&Hr(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o}function Za(o,t,n){return t=Fr(t),t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}function Ur(o){return qa(o)||Ga(o)||Ja(o)||Qa()}function qa(o){if(Array.isArray(o))return Lt(o)}function Ga(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function Ja(o,t){if(o){if(typeof o=="string")return Lt(o,t);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(o,t)}}function Lt(o,t){(t==null||t>o.length)&&(t=o.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=o[n];return s}function Qa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function el(o,t){if(typeof o!="object"||o===null)return o;var n=o[Symbol.toPrimitive];if(n!==void 0){var s=n.call(o,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(o)}function Fr(o){var t=el(o,"string");return typeof t=="symbol"?t:String(t)}var ht=typeof window<"u"&&typeof window.document<"u",ge=ht?window:{},Ot=ht&&ge.document.documentElement?"ontouchstart"in ge.document.documentElement:!1,jt=ht?"PointerEvent"in ge:!1,U="cropper",Pt="all",Kr="crop",Yr="move",Wr="zoom",Be="e",$e="w",Le="s",ke="n",Ye="ne",We="nw",Xe="se",Ze="sw",zt="".concat(U,"-crop"),Xr="".concat(U,"-disabled"),Q="".concat(U,"-hidden"),Zr="".concat(U,"-hide"),tl="".concat(U,"-invisible"),ut="".concat(U,"-modal"),Rt="".concat(U,"-move"),qe="".concat(U,"Action"),ft="".concat(U,"Preview"),Ht="crop",qr="move",Gr="none",Ut="crop",Ft="cropend",Kt="cropmove",Yt="cropstart",Jr="dblclick",rl=Ot?"touchstart":"mousedown",ol=Ot?"touchmove":"mousemove",nl=Ot?"touchend touchcancel":"mouseup",Qr=jt?"pointerdown":rl,eo=jt?"pointermove":ol,to=jt?"pointerup pointercancel":nl,ro="ready",oo="resize",no="wheel",Wt="zoom",so="image/jpeg",sl=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,il=/^data:/,al=/^data:image\/jpeg;base64,/,ll=/^img|canvas$/i,io=200,ao=100,lo={viewMode:0,dragMode:Ht,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:io,minContainerHeight:ao,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},cl='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',dl=Number.isNaN||ge.isNaN;function j(o){return typeof o=="number"&&!dl(o)}var co=function(t){return t>0&&t<1/0};function Xt(o){return typeof o>"u"}function Te(o){return It(o)==="object"&&o!==null}var hl=Object.prototype.hasOwnProperty;function Oe(o){if(!Te(o))return!1;try{var t=o.constructor,n=t.prototype;return t&&n&&hl.call(n,"isPrototypeOf")}catch{return!1}}function ee(o){return typeof o=="function"}var ul=Array.prototype.slice;function ho(o){return Array.from?Array.from(o):ul.call(o)}function Y(o,t){return o&&ee(t)&&(Array.isArray(o)||j(o.length)?ho(o).forEach(function(n,s){t.call(o,n,s,o)}):Te(o)&&Object.keys(o).forEach(function(n){t.call(o,o[n],n,o)})),o}var F=Object.assign||function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),l=1;l<n;l++)s[l-1]=arguments[l];return Te(t)&&s.length>0&&s.forEach(function(a){Te(a)&&Object.keys(a).forEach(function(u){t[u]=a[u]})}),t},fl=/\.\d*(?:0|9){12}\d*$/;function je(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return fl.test(o)?Math.round(o*t)/t:o}var ml=/^width|height|left|top|marginLeft|marginTop$/;function De(o,t){var n=o.style;Y(t,function(s,l){ml.test(l)&&j(s)&&(s="".concat(s,"px")),n[l]=s})}function pl(o,t){return o.classList?o.classList.contains(t):o.className.indexOf(t)>-1}function q(o,t){if(t){if(j(o.length)){Y(o,function(s){q(s,t)});return}if(o.classList){o.classList.add(t);return}var n=o.className.trim();n?n.indexOf(t)<0&&(o.className="".concat(n," ").concat(t)):o.className=t}}function ye(o,t){if(t){if(j(o.length)){Y(o,function(n){ye(n,t)});return}if(o.classList){o.classList.remove(t);return}o.className.indexOf(t)>=0&&(o.className=o.className.replace(t,""))}}function Pe(o,t,n){if(t){if(j(o.length)){Y(o,function(s){Pe(s,t,n)});return}n?q(o,t):ye(o,t)}}var gl=/([a-z\d])([A-Z])/g;function Zt(o){return o.replace(gl,"$1-$2").toLowerCase()}function qt(o,t){return Te(o[t])?o[t]:o.dataset?o.dataset[t]:o.getAttribute("data-".concat(Zt(t)))}function Ge(o,t,n){Te(n)?o[t]=n:o.dataset?o.dataset[t]=n:o.setAttribute("data-".concat(Zt(t)),n)}function yl(o,t){if(Te(o[t]))try{delete o[t]}catch{o[t]=void 0}else if(o.dataset)try{delete o.dataset[t]}catch{o.dataset[t]=void 0}else o.removeAttribute("data-".concat(Zt(t)))}var uo=/\s\s*/,fo=function(){var o=!1;if(ht){var t=!1,n=function(){},s=Object.defineProperty({},"once",{get:function(){return o=!0,t},set:function(a){t=a}});ge.addEventListener("test",n,s),ge.removeEventListener("test",n,s)}return o}();function le(o,t,n){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=n;t.trim().split(uo).forEach(function(a){if(!fo){var u=o.listeners;u&&u[a]&&u[a][n]&&(l=u[a][n],delete u[a][n],Object.keys(u[a]).length===0&&delete u[a],Object.keys(u).length===0&&delete o.listeners)}o.removeEventListener(a,l,s)})}function se(o,t,n){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=n;t.trim().split(uo).forEach(function(a){if(s.once&&!fo){var u=o.listeners,g=u===void 0?{}:u;l=function(){delete g[a][n],o.removeEventListener(a,l,s);for(var y=arguments.length,m=new Array(y),b=0;b<y;b++)m[b]=arguments[b];n.apply(o,m)},g[a]||(g[a]={}),g[a][n]&&o.removeEventListener(a,g[a][n],s),g[a][n]=l,o.listeners=g}o.addEventListener(a,l,s)})}function ze(o,t,n){var s;return ee(Event)&&ee(CustomEvent)?s=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(t,!0,!0,n)),o.dispatchEvent(s)}function mo(o){var t=o.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Gt=ge.location,bl=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function po(o){var t=o.match(bl);return t!==null&&(t[1]!==Gt.protocol||t[2]!==Gt.hostname||t[3]!==Gt.port)}function go(o){var t="timestamp=".concat(new Date().getTime());return o+(o.indexOf("?")===-1?"?":"&")+t}function Je(o){var t=o.rotate,n=o.scaleX,s=o.scaleY,l=o.translateX,a=o.translateY,u=[];j(l)&&l!==0&&u.push("translateX(".concat(l,"px)")),j(a)&&a!==0&&u.push("translateY(".concat(a,"px)")),j(t)&&t!==0&&u.push("rotate(".concat(t,"deg)")),j(n)&&n!==1&&u.push("scaleX(".concat(n,")")),j(s)&&s!==1&&u.push("scaleY(".concat(s,")"));var g=u.length?u.join(" "):"none";return{WebkitTransform:g,msTransform:g,transform:g}}function vl(o){var t=Rr({},o),n=0;return Y(o,function(s,l){delete t[l],Y(t,function(a){var u=Math.abs(s.startX-a.startX),g=Math.abs(s.startY-a.startY),c=Math.abs(s.endX-a.endX),y=Math.abs(s.endY-a.endY),m=Math.sqrt(u*u+g*g),b=Math.sqrt(c*c+y*y),S=(b-m)/m;Math.abs(S)>Math.abs(n)&&(n=S)})}),n}function mt(o,t){var n=o.pageX,s=o.pageY,l={endX:n,endY:s};return t?l:Rr({startX:n,startY:s},l)}function Sl(o){var t=0,n=0,s=0;return Y(o,function(l){var a=l.startX,u=l.startY;t+=a,n+=u,s+=1}),t/=s,n/=s,{pageX:t,pageY:n}}function Ee(o){var t=o.aspectRatio,n=o.height,s=o.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",a=co(s),u=co(n);if(a&&u){var g=n*t;l==="contain"&&g>s||l==="cover"&&g<s?n=s/t:s=n*t}else a?n=s/t:u&&(s=n*t);return{width:s,height:n}}function _l(o){var t=o.width,n=o.height,s=o.degree;if(s=Math.abs(s)%180,s===90)return{width:n,height:t};var l=s%90*Math.PI/180,a=Math.sin(l),u=Math.cos(l),g=t*u+n*a,c=t*a+n*u;return s>90?{width:c,height:g}:{width:g,height:c}}function wl(o,t,n,s){var l=t.aspectRatio,a=t.naturalWidth,u=t.naturalHeight,g=t.rotate,c=g===void 0?0:g,y=t.scaleX,m=y===void 0?1:y,b=t.scaleY,S=b===void 0?1:b,k=n.aspectRatio,E=n.naturalWidth,N=n.naturalHeight,D=s.fillColor,A=D===void 0?"transparent":D,T=s.imageSmoothingEnabled,B=T===void 0?!0:T,L=s.imageSmoothingQuality,R=L===void 0?"low":L,w=s.maxWidth,M=w===void 0?1/0:w,H=s.maxHeight,X=H===void 0?1/0:H,W=s.minWidth,te=W===void 0?0:W,ie=s.minHeight,oe=ie===void 0?0:ie,re=document.createElement("canvas"),C=re.getContext("2d"),$=Ee({aspectRatio:k,width:M,height:X}),V=Ee({aspectRatio:k,width:te,height:oe},"cover"),K=Math.min($.width,Math.max(V.width,E)),O=Math.min($.height,Math.max(V.height,N)),ce=Ee({aspectRatio:l,width:M,height:X}),ae=Ee({aspectRatio:l,width:te,height:oe},"cover"),pt=Math.min(ce.width,Math.max(ae.width,a)),gt=Math.min(ce.height,Math.max(ae.height,u)),Qt=[-pt/2,-gt/2,pt,gt];return re.width=je(K),re.height=je(O),C.fillStyle=A,C.fillRect(0,0,K,O),C.save(),C.translate(K/2,O/2),C.rotate(c*Math.PI/180),C.scale(m,S),C.imageSmoothingEnabled=B,C.imageSmoothingQuality=R,C.drawImage.apply(C,[o].concat(Ur(Qt.map(function(yt){return Math.floor(je(yt))})))),C.restore(),re}var yo=String.fromCharCode;function xl(o,t,n){var s="";n+=t;for(var l=t;l<n;l+=1)s+=yo(o.getUint8(l));return s}var kl=/^data:.*,/;function Dl(o){var t=o.replace(kl,""),n=atob(t),s=new ArrayBuffer(n.length),l=new Uint8Array(s);return Y(l,function(a,u){l[u]=n.charCodeAt(u)}),s}function El(o,t){for(var n=[],s=8192,l=new Uint8Array(o);l.length>0;)n.push(yo.apply(null,ho(l.subarray(0,s)))),l=l.subarray(s);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}function Nl(o){var t=new DataView(o),n;try{var s,l,a;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var u=t.byteLength,g=2;g+1<u;){if(t.getUint8(g)===255&&t.getUint8(g+1)===225){l=g;break}g+=1}if(l){var c=l+4,y=l+10;if(xl(t,c,4)==="Exif"){var m=t.getUint16(y);if(s=m===18761,(s||m===19789)&&t.getUint16(y+2,s)===42){var b=t.getUint32(y+4,s);b>=8&&(a=y+b)}}}if(a){var S=t.getUint16(a,s),k,E;for(E=0;E<S;E+=1)if(k=a+E*12+2,t.getUint16(k,s)===274){k+=8,n=t.getUint16(k,s),t.setUint16(k,1,s);break}}}catch{n=1}return n}function Cl(o){var t=0,n=1,s=1;switch(o){case 2:n=-1;break;case 3:t=-180;break;case 4:s=-1;break;case 5:t=90,s=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:n,scaleY:s}}var Vl={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,n=this.options,s=this.container,l=this.cropper,a=Number(n.minContainerWidth),u=Number(n.minContainerHeight);q(l,Q),ye(t,Q);var g={width:Math.max(s.offsetWidth,a>=0?a:io),height:Math.max(s.offsetHeight,u>=0?u:ao)};this.containerData=g,De(l,{width:g.width,height:g.height}),q(t,Q),ye(l,Q)},initCanvas:function(){var t=this.containerData,n=this.imageData,s=this.options.viewMode,l=Math.abs(n.rotate)%180===90,a=l?n.naturalHeight:n.naturalWidth,u=l?n.naturalWidth:n.naturalHeight,g=a/u,c=t.width,y=t.height;t.height*g>t.width?s===3?c=t.height*g:y=t.width/g:s===3?y=t.width/g:c=t.height*g;var m={aspectRatio:g,naturalWidth:a,naturalHeight:u,width:c,height:y};this.canvasData=m,this.limited=s===1||s===2,this.limitCanvas(!0,!0),m.width=Math.min(Math.max(m.width,m.minWidth),m.maxWidth),m.height=Math.min(Math.max(m.height,m.minHeight),m.maxHeight),m.left=(t.width-m.width)/2,m.top=(t.height-m.height)/2,m.oldLeft=m.left,m.oldTop=m.top,this.initialCanvasData=F({},m)},limitCanvas:function(t,n){var s=this.options,l=this.containerData,a=this.canvasData,u=this.cropBoxData,g=s.viewMode,c=a.aspectRatio,y=this.cropped&&u;if(t){var m=Number(s.minCanvasWidth)||0,b=Number(s.minCanvasHeight)||0;g>1?(m=Math.max(m,l.width),b=Math.max(b,l.height),g===3&&(b*c>m?m=b*c:b=m/c)):g>0&&(m?m=Math.max(m,y?u.width:0):b?b=Math.max(b,y?u.height:0):y&&(m=u.width,b=u.height,b*c>m?m=b*c:b=m/c));var S=Ee({aspectRatio:c,width:m,height:b});m=S.width,b=S.height,a.minWidth=m,a.minHeight=b,a.maxWidth=1/0,a.maxHeight=1/0}if(n)if(g>(y?0:1)){var k=l.width-a.width,E=l.height-a.height;a.minLeft=Math.min(0,k),a.minTop=Math.min(0,E),a.maxLeft=Math.max(0,k),a.maxTop=Math.max(0,E),y&&this.limited&&(a.minLeft=Math.min(u.left,u.left+(u.width-a.width)),a.minTop=Math.min(u.top,u.top+(u.height-a.height)),a.maxLeft=u.left,a.maxTop=u.top,g===2&&(a.width>=l.width&&(a.minLeft=Math.min(0,k),a.maxLeft=Math.max(0,k)),a.height>=l.height&&(a.minTop=Math.min(0,E),a.maxTop=Math.max(0,E))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=l.width,a.maxTop=l.height},renderCanvas:function(t,n){var s=this.canvasData,l=this.imageData;if(n){var a=_l({width:l.naturalWidth*Math.abs(l.scaleX||1),height:l.naturalHeight*Math.abs(l.scaleY||1),degree:l.rotate||0}),u=a.width,g=a.height,c=s.width*(u/s.naturalWidth),y=s.height*(g/s.naturalHeight);s.left-=(c-s.width)/2,s.top-=(y-s.height)/2,s.width=c,s.height=y,s.aspectRatio=u/g,s.naturalWidth=u,s.naturalHeight=g,this.limitCanvas(!0,!1)}(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,De(this.canvas,F({width:s.width,height:s.height},Je({translateX:s.left,translateY:s.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var n=this.canvasData,s=this.imageData,l=s.naturalWidth*(n.width/n.naturalWidth),a=s.naturalHeight*(n.height/n.naturalHeight);F(s,{width:l,height:a,left:(n.width-l)/2,top:(n.height-a)/2}),De(this.image,F({width:s.width,height:s.height},Je(F({translateX:s.left,translateY:s.top},s)))),t&&this.output()},initCropBox:function(){var t=this.options,n=this.canvasData,s=t.aspectRatio||t.initialAspectRatio,l=Number(t.autoCropArea)||.8,a={width:n.width,height:n.height};s&&(n.height*s>n.width?a.height=a.width/s:a.width=a.height*s),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*l),a.height=Math.max(a.minHeight,a.height*l),a.left=n.left+(n.width-a.width)/2,a.top=n.top+(n.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=F({},a)},limitCropBox:function(t,n){var s=this.options,l=this.containerData,a=this.canvasData,u=this.cropBoxData,g=this.limited,c=s.aspectRatio;if(t){var y=Number(s.minCropBoxWidth)||0,m=Number(s.minCropBoxHeight)||0,b=g?Math.min(l.width,a.width,a.width+a.left,l.width-a.left):l.width,S=g?Math.min(l.height,a.height,a.height+a.top,l.height-a.top):l.height;y=Math.min(y,l.width),m=Math.min(m,l.height),c&&(y&&m?m*c>y?m=y/c:y=m*c:y?m=y/c:m&&(y=m*c),S*c>b?S=b/c:b=S*c),u.minWidth=Math.min(y,b),u.minHeight=Math.min(m,S),u.maxWidth=b,u.maxHeight=S}n&&(g?(u.minLeft=Math.max(0,a.left),u.minTop=Math.max(0,a.top),u.maxLeft=Math.min(l.width,a.left+a.width)-u.width,u.maxTop=Math.min(l.height,a.top+a.height)-u.height):(u.minLeft=0,u.minTop=0,u.maxLeft=l.width-u.width,u.maxTop=l.height-u.height))},renderCropBox:function(){var t=this.options,n=this.containerData,s=this.cropBoxData;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,t.movable&&t.cropBoxMovable&&Ge(this.face,qe,s.width>=n.width&&s.height>=n.height?Yr:Pt),De(this.cropBox,F({width:s.width,height:s.height},Je({translateX:s.left,translateY:s.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ze(this.element,Ut,this.getData())}},Ml={initPreview:function(){var t=this.element,n=this.crossOrigin,s=this.options.preview,l=n?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",u=document.createElement("img");if(n&&(u.crossOrigin=n),u.src=l,u.alt=a,this.viewBox.appendChild(u),this.viewBoxImage=u,!!s){var g=s;typeof s=="string"?g=t.ownerDocument.querySelectorAll(s):s.querySelector&&(g=[s]),this.previews=g,Y(g,function(c){var y=document.createElement("img");Ge(c,ft,{width:c.offsetWidth,height:c.offsetHeight,html:c.innerHTML}),n&&(y.crossOrigin=n),y.src=l,y.alt=a,y.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',c.innerHTML="",c.appendChild(y)})}},resetPreview:function(){Y(this.previews,function(t){var n=qt(t,ft);De(t,{width:n.width,height:n.height}),t.innerHTML=n.html,yl(t,ft)})},preview:function(){var t=this.imageData,n=this.canvasData,s=this.cropBoxData,l=s.width,a=s.height,u=t.width,g=t.height,c=s.left-n.left-t.left,y=s.top-n.top-t.top;!this.cropped||this.disabled||(De(this.viewBoxImage,F({width:u,height:g},Je(F({translateX:-c,translateY:-y},t)))),Y(this.previews,function(m){var b=qt(m,ft),S=b.width,k=b.height,E=S,N=k,D=1;l&&(D=S/l,N=a*D),a&&N>k&&(D=k/a,E=l*D,N=k),De(m,{width:E,height:N}),De(m.getElementsByTagName("img")[0],F({width:u*D,height:g*D},Je(F({translateX:-c*D,translateY:-y*D},t))))}))}},Bl={bind:function(){var t=this.element,n=this.options,s=this.cropper;ee(n.cropstart)&&se(t,Yt,n.cropstart),ee(n.cropmove)&&se(t,Kt,n.cropmove),ee(n.cropend)&&se(t,Ft,n.cropend),ee(n.crop)&&se(t,Ut,n.crop),ee(n.zoom)&&se(t,Wt,n.zoom),se(s,Qr,this.onCropStart=this.cropStart.bind(this)),n.zoomable&&n.zoomOnWheel&&se(s,no,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&se(s,Jr,this.onDblclick=this.dblclick.bind(this)),se(t.ownerDocument,eo,this.onCropMove=this.cropMove.bind(this)),se(t.ownerDocument,to,this.onCropEnd=this.cropEnd.bind(this)),n.responsive&&se(window,oo,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,n=this.options,s=this.cropper;ee(n.cropstart)&&le(t,Yt,n.cropstart),ee(n.cropmove)&&le(t,Kt,n.cropmove),ee(n.cropend)&&le(t,Ft,n.cropend),ee(n.crop)&&le(t,Ut,n.crop),ee(n.zoom)&&le(t,Wt,n.zoom),le(s,Qr,this.onCropStart),n.zoomable&&n.zoomOnWheel&&le(s,no,this.onWheel,{passive:!1,capture:!0}),n.toggleDragModeOnDblclick&&le(s,Jr,this.onDblclick),le(t.ownerDocument,eo,this.onCropMove),le(t.ownerDocument,to,this.onCropEnd),n.responsive&&le(window,oo,this.onResize)}},$l={resize:function(){if(!this.disabled){var t=this.options,n=this.container,s=this.containerData,l=n.offsetWidth/s.width,a=n.offsetHeight/s.height,u=Math.abs(l-1)>Math.abs(a-1)?l:a;if(u!==1){var g,c;t.restore&&(g=this.getCanvasData(),c=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(Y(g,function(y,m){g[m]=y*u})),this.setCropBoxData(Y(c,function(y,m){c[m]=y*u})))}}},dblclick:function(){this.disabled||this.options.dragMode===Gr||this.setDragMode(pl(this.dragBox,zt)?qr:Ht)},wheel:function(t){var n=this,s=Number(this.options.wheelZoomRatio)||.1,l=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),t.deltaY?l=t.deltaY>0?1:-1:t.wheelDelta?l=-t.wheelDelta/120:t.detail&&(l=t.detail>0?1:-1),this.zoom(-l*s,t)))},cropStart:function(t){var n=t.buttons,s=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(j(n)&&n!==1||j(s)&&s!==0||t.ctrlKey))){var l=this.options,a=this.pointers,u;t.changedTouches?Y(t.changedTouches,function(g){a[g.identifier]=mt(g)}):a[t.pointerId||0]=mt(t),Object.keys(a).length>1&&l.zoomable&&l.zoomOnTouch?u=Wr:u=qt(t.target,qe),sl.test(u)&&ze(this.element,Yt,{originalEvent:t,action:u})!==!1&&(t.preventDefault(),this.action=u,this.cropping=!1,u===Kr&&(this.cropping=!0,q(this.dragBox,ut)))}},cropMove:function(t){var n=this.action;if(!(this.disabled||!n)){var s=this.pointers;t.preventDefault(),ze(this.element,Kt,{originalEvent:t,action:n})!==!1&&(t.changedTouches?Y(t.changedTouches,function(l){F(s[l.identifier]||{},mt(l,!0))}):F(s[t.pointerId||0]||{},mt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var n=this.action,s=this.pointers;t.changedTouches?Y(t.changedTouches,function(l){delete s[l.identifier]}):delete s[t.pointerId||0],n&&(t.preventDefault(),Object.keys(s).length||(this.action=""),this.cropping&&(this.cropping=!1,Pe(this.dragBox,ut,this.cropped&&this.options.modal)),ze(this.element,Ft,{originalEvent:t,action:n}))}}},Tl={change:function(t){var n=this.options,s=this.canvasData,l=this.containerData,a=this.cropBoxData,u=this.pointers,g=this.action,c=n.aspectRatio,y=a.left,m=a.top,b=a.width,S=a.height,k=y+b,E=m+S,N=0,D=0,A=l.width,T=l.height,B=!0,L;!c&&t.shiftKey&&(c=b&&S?b/S:1),this.limited&&(N=a.minLeft,D=a.minTop,A=N+Math.min(l.width,s.width,s.left+s.width),T=D+Math.min(l.height,s.height,s.top+s.height));var R=u[Object.keys(u)[0]],w={x:R.endX-R.startX,y:R.endY-R.startY},M=function(X){switch(X){case Be:k+w.x>A&&(w.x=A-k);break;case $e:y+w.x<N&&(w.x=N-y);break;case ke:m+w.y<D&&(w.y=D-m);break;case Le:E+w.y>T&&(w.y=T-E);break}};switch(g){case Pt:y+=w.x,m+=w.y;break;case Be:if(w.x>=0&&(k>=A||c&&(m<=D||E>=T))){B=!1;break}M(Be),b+=w.x,b<0&&(g=$e,b=-b,y-=b),c&&(S=b/c,m+=(a.height-S)/2);break;case ke:if(w.y<=0&&(m<=D||c&&(y<=N||k>=A))){B=!1;break}M(ke),S-=w.y,m+=w.y,S<0&&(g=Le,S=-S,m-=S),c&&(b=S*c,y+=(a.width-b)/2);break;case $e:if(w.x<=0&&(y<=N||c&&(m<=D||E>=T))){B=!1;break}M($e),b-=w.x,y+=w.x,b<0&&(g=Be,b=-b,y-=b),c&&(S=b/c,m+=(a.height-S)/2);break;case Le:if(w.y>=0&&(E>=T||c&&(y<=N||k>=A))){B=!1;break}M(Le),S+=w.y,S<0&&(g=ke,S=-S,m-=S),c&&(b=S*c,y+=(a.width-b)/2);break;case Ye:if(c){if(w.y<=0&&(m<=D||k>=A)){B=!1;break}M(ke),S-=w.y,m+=w.y,b=S*c}else M(ke),M(Be),w.x>=0?k<A?b+=w.x:w.y<=0&&m<=D&&(B=!1):b+=w.x,w.y<=0?m>D&&(S-=w.y,m+=w.y):(S-=w.y,m+=w.y);b<0&&S<0?(g=Ze,S=-S,b=-b,m-=S,y-=b):b<0?(g=We,b=-b,y-=b):S<0&&(g=Xe,S=-S,m-=S);break;case We:if(c){if(w.y<=0&&(m<=D||y<=N)){B=!1;break}M(ke),S-=w.y,m+=w.y,b=S*c,y+=a.width-b}else M(ke),M($e),w.x<=0?y>N?(b-=w.x,y+=w.x):w.y<=0&&m<=D&&(B=!1):(b-=w.x,y+=w.x),w.y<=0?m>D&&(S-=w.y,m+=w.y):(S-=w.y,m+=w.y);b<0&&S<0?(g=Xe,S=-S,b=-b,m-=S,y-=b):b<0?(g=Ye,b=-b,y-=b):S<0&&(g=Ze,S=-S,m-=S);break;case Ze:if(c){if(w.x<=0&&(y<=N||E>=T)){B=!1;break}M($e),b-=w.x,y+=w.x,S=b/c}else M(Le),M($e),w.x<=0?y>N?(b-=w.x,y+=w.x):w.y>=0&&E>=T&&(B=!1):(b-=w.x,y+=w.x),w.y>=0?E<T&&(S+=w.y):S+=w.y;b<0&&S<0?(g=Ye,S=-S,b=-b,m-=S,y-=b):b<0?(g=Xe,b=-b,y-=b):S<0&&(g=We,S=-S,m-=S);break;case Xe:if(c){if(w.x>=0&&(k>=A||E>=T)){B=!1;break}M(Be),b+=w.x,S=b/c}else M(Le),M(Be),w.x>=0?k<A?b+=w.x:w.y>=0&&E>=T&&(B=!1):b+=w.x,w.y>=0?E<T&&(S+=w.y):S+=w.y;b<0&&S<0?(g=We,S=-S,b=-b,m-=S,y-=b):b<0?(g=Ze,b=-b,y-=b):S<0&&(g=Ye,S=-S,m-=S);break;case Yr:this.move(w.x,w.y),B=!1;break;case Wr:this.zoom(vl(u),t),B=!1;break;case Kr:if(!w.x||!w.y){B=!1;break}L=mo(this.cropper),y=R.startX-L.left,m=R.startY-L.top,b=a.minWidth,S=a.minHeight,w.x>0?g=w.y>0?Xe:Ye:w.x<0&&(y-=b,g=w.y>0?Ze:We),w.y<0&&(m-=S),this.cropped||(ye(this.cropBox,Q),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}B&&(a.width=b,a.height=S,a.left=y,a.top=m,this.action=g,this.renderCropBox()),Y(u,function(H){H.startX=H.endX,H.startY=H.endY})}},Al={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&q(this.dragBox,ut),ye(this.cropBox,Q),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=F({},this.initialImageData),this.canvasData=F({},this.initialCanvasData),this.cropBoxData=F({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(F(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ye(this.dragBox,ut),q(this.cropBox,Q)),this},replace:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),n?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Y(this.previews,function(s){s.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ye(this.cropper,Xr)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,q(this.cropper,Xr)),this},destroy:function(){var t=this.element;return t[U]?(t[U]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.canvasData,l=s.left,a=s.top;return this.moveTo(Xt(t)?t:l+Number(t),Xt(n)?n:a+Number(n))},moveTo:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.canvasData,l=!1;return t=Number(t),n=Number(n),this.ready&&!this.disabled&&this.options.movable&&(j(t)&&(s.left=t,l=!0),j(n)&&(s.top=n,l=!0),l&&this.renderCanvas(!0)),this},zoom:function(t,n){var s=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(s.width*t/s.naturalWidth,null,n)},zoomTo:function(t,n,s){var l=this.options,a=this.canvasData,u=a.width,g=a.height,c=a.naturalWidth,y=a.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&l.zoomable){var m=c*t,b=y*t;if(ze(this.element,Wt,{ratio:t,oldRatio:u/c,originalEvent:s})===!1)return this;if(s){var S=this.pointers,k=mo(this.cropper),E=S&&Object.keys(S).length?Sl(S):{pageX:s.pageX,pageY:s.pageY};a.left-=(m-u)*((E.pageX-k.left-a.left)/u),a.top-=(b-g)*((E.pageY-k.top-a.top)/g)}else Oe(n)&&j(n.x)&&j(n.y)?(a.left-=(m-u)*((n.x-a.left)/u),a.top-=(b-g)*((n.y-a.top)/g)):(a.left-=(m-u)/2,a.top-=(b-g)/2);a.width=m,a.height=b,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),j(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var n=this.imageData.scaleY;return this.scale(t,j(n)?n:1)},scaleY:function(t){var n=this.imageData.scaleX;return this.scale(j(n)?n:1,t)},scale:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.imageData,l=!1;return t=Number(t),n=Number(n),this.ready&&!this.disabled&&this.options.scalable&&(j(t)&&(s.scaleX=t,l=!0),j(n)&&(s.scaleY=n,l=!0),l&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.options,s=this.imageData,l=this.canvasData,a=this.cropBoxData,u;if(this.ready&&this.cropped){u={x:a.left-l.left,y:a.top-l.top,width:a.width,height:a.height};var g=s.width/s.naturalWidth;if(Y(u,function(m,b){u[b]=m/g}),t){var c=Math.round(u.y+u.height),y=Math.round(u.x+u.width);u.x=Math.round(u.x),u.y=Math.round(u.y),u.width=y-u.x,u.height=c-u.y}}else u={x:0,y:0,width:0,height:0};return n.rotatable&&(u.rotate=s.rotate||0),n.scalable&&(u.scaleX=s.scaleX||1,u.scaleY=s.scaleY||1),u},setData:function(t){var n=this.options,s=this.imageData,l=this.canvasData,a={};if(this.ready&&!this.disabled&&Oe(t)){var u=!1;n.rotatable&&j(t.rotate)&&t.rotate!==s.rotate&&(s.rotate=t.rotate,u=!0),n.scalable&&(j(t.scaleX)&&t.scaleX!==s.scaleX&&(s.scaleX=t.scaleX,u=!0),j(t.scaleY)&&t.scaleY!==s.scaleY&&(s.scaleY=t.scaleY,u=!0)),u&&this.renderCanvas(!0,!0);var g=s.width/s.naturalWidth;j(t.x)&&(a.left=t.x*g+l.left),j(t.y)&&(a.top=t.y*g+l.top),j(t.width)&&(a.width=t.width*g),j(t.height)&&(a.height=t.height*g),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?F({},this.containerData):{}},getImageData:function(){return this.sized?F({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,n={};return this.ready&&Y(["left","top","width","height","naturalWidth","naturalHeight"],function(s){n[s]=t[s]}),n},setCanvasData:function(t){var n=this.canvasData,s=n.aspectRatio;return this.ready&&!this.disabled&&Oe(t)&&(j(t.left)&&(n.left=t.left),j(t.top)&&(n.top=t.top),j(t.width)?(n.width=t.width,n.height=t.width/s):j(t.height)&&(n.height=t.height,n.width=t.height*s),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,n;return this.ready&&this.cropped&&(n={left:t.left,top:t.top,width:t.width,height:t.height}),n||{}},setCropBoxData:function(t){var n=this.cropBoxData,s=this.options.aspectRatio,l,a;return this.ready&&this.cropped&&!this.disabled&&Oe(t)&&(j(t.left)&&(n.left=t.left),j(t.top)&&(n.top=t.top),j(t.width)&&t.width!==n.width&&(l=!0,n.width=t.width),j(t.height)&&t.height!==n.height&&(a=!0,n.height=t.height),s&&(l?n.height=n.width/s:a&&(n.width=n.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var n=this.canvasData,s=wl(this.image,this.imageData,n,t);if(!this.cropped)return s;var l=this.getData(t.rounded),a=l.x,u=l.y,g=l.width,c=l.height,y=s.width/Math.floor(n.naturalWidth);y!==1&&(a*=y,u*=y,g*=y,c*=y);var m=g/c,b=Ee({aspectRatio:m,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),S=Ee({aspectRatio:m,width:t.minWidth||0,height:t.minHeight||0},"cover"),k=Ee({aspectRatio:m,width:t.width||(y!==1?s.width:g),height:t.height||(y!==1?s.height:c)}),E=k.width,N=k.height;E=Math.min(b.width,Math.max(S.width,E)),N=Math.min(b.height,Math.max(S.height,N));var D=document.createElement("canvas"),A=D.getContext("2d");D.width=je(E),D.height=je(N),A.fillStyle=t.fillColor||"transparent",A.fillRect(0,0,E,N);var T=t.imageSmoothingEnabled,B=T===void 0?!0:T,L=t.imageSmoothingQuality;A.imageSmoothingEnabled=B,L&&(A.imageSmoothingQuality=L);var R=s.width,w=s.height,M=a,H=u,X,W,te,ie,oe,re;M<=-g||M>R?(M=0,X=0,te=0,oe=0):M<=0?(te=-M,M=0,X=Math.min(R,g+M),oe=X):M<=R&&(te=0,X=Math.min(g,R-M),oe=X),X<=0||H<=-c||H>w?(H=0,W=0,ie=0,re=0):H<=0?(ie=-H,H=0,W=Math.min(w,c+H),re=W):H<=w&&(ie=0,W=Math.min(c,w-H),re=W);var C=[M,H,X,W];if(oe>0&&re>0){var $=E/g;C.push(te*$,ie*$,oe*$,re*$)}return A.drawImage.apply(A,[s].concat(Ur(C.map(function(V){return Math.floor(je(V))})))),D},setAspectRatio:function(t){var n=this.options;return!this.disabled&&!Xt(t)&&(n.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var n=this.options,s=this.dragBox,l=this.face;if(this.ready&&!this.disabled){var a=t===Ht,u=n.movable&&t===qr;t=a||u?t:Gr,n.dragMode=t,Ge(s,qe,t),Pe(s,zt,a),Pe(s,Rt,u),n.cropBoxMovable||(Ge(l,qe,t),Pe(l,zt,a),Pe(l,Rt,u))}return this}},Il=ge.Cropper,bo=function(){function o(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Wa(this,o),!t||!ll.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=F({},lo,Oe(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Xa(o,[{key:"init",value:function(){var n=this.element,s=n.tagName.toLowerCase(),l;if(!n[U]){if(n[U]=this,s==="img"){if(this.isImg=!0,l=n.getAttribute("src")||"",this.originalUrl=l,!l)return;l=n.src}else s==="canvas"&&window.HTMLCanvasElement&&(l=n.toDataURL());this.load(l)}}},{key:"load",value:function(n){var s=this;if(n){this.url=n,this.imageData={};var l=this.element,a=this.options;if(!a.rotatable&&!a.scalable&&(a.checkOrientation=!1),!a.checkOrientation||!window.ArrayBuffer){this.clone();return}if(il.test(n)){al.test(n)?this.read(Dl(n)):this.clone();return}var u=new XMLHttpRequest,g=this.clone.bind(this);this.reloading=!0,this.xhr=u,u.onabort=g,u.onerror=g,u.ontimeout=g,u.onprogress=function(){u.getResponseHeader("content-type")!==so&&u.abort()},u.onload=function(){s.read(u.response)},u.onloadend=function(){s.reloading=!1,s.xhr=null},a.checkCrossOrigin&&po(n)&&l.crossOrigin&&(n=go(n)),u.open("GET",n,!0),u.responseType="arraybuffer",u.withCredentials=l.crossOrigin==="use-credentials",u.send()}}},{key:"read",value:function(n){var s=this.options,l=this.imageData,a=Nl(n),u=0,g=1,c=1;if(a>1){this.url=El(n,so);var y=Cl(a);u=y.rotate,g=y.scaleX,c=y.scaleY}s.rotatable&&(l.rotate=u),s.scalable&&(l.scaleX=g,l.scaleY=c),this.clone()}},{key:"clone",value:function(){var n=this.element,s=this.url,l=n.crossOrigin,a=s;this.options.checkCrossOrigin&&po(s)&&(l||(l="anonymous"),a=go(s)),this.crossOrigin=l,this.crossOriginUrl=a;var u=document.createElement("img");l&&(u.crossOrigin=l),u.src=a||s,u.alt=n.alt||"The image to crop",this.image=u,u.onload=this.start.bind(this),u.onerror=this.stop.bind(this),q(u,Zr),n.parentNode.insertBefore(u,n.nextSibling)}},{key:"start",value:function(){var n=this,s=this.image;s.onload=null,s.onerror=null,this.sizing=!0;var l=ge.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ge.navigator.userAgent),a=function(y,m){F(n.imageData,{naturalWidth:y,naturalHeight:m,aspectRatio:y/m}),n.initialImageData=F({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(s.naturalWidth&&!l){a(s.naturalWidth,s.naturalHeight);return}var u=document.createElement("img"),g=document.body||document.documentElement;this.sizingImage=u,u.onload=function(){a(u.width,u.height),l||g.removeChild(u)},u.src=s.src,l||(u.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",g.appendChild(u))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var n=this.element,s=this.options,l=this.image,a=n.parentNode,u=document.createElement("div");u.innerHTML=cl;var g=u.querySelector(".".concat(U,"-container")),c=g.querySelector(".".concat(U,"-canvas")),y=g.querySelector(".".concat(U,"-drag-box")),m=g.querySelector(".".concat(U,"-crop-box")),b=m.querySelector(".".concat(U,"-face"));this.container=a,this.cropper=g,this.canvas=c,this.dragBox=y,this.cropBox=m,this.viewBox=g.querySelector(".".concat(U,"-view-box")),this.face=b,c.appendChild(l),q(n,Q),a.insertBefore(g,n.nextSibling),ye(l,Zr),this.initPreview(),this.bind(),s.initialAspectRatio=Math.max(0,s.initialAspectRatio)||NaN,s.aspectRatio=Math.max(0,s.aspectRatio)||NaN,s.viewMode=Math.max(0,Math.min(3,Math.round(s.viewMode)))||0,q(m,Q),s.guides||q(m.getElementsByClassName("".concat(U,"-dashed")),Q),s.center||q(m.getElementsByClassName("".concat(U,"-center")),Q),s.background&&q(g,"".concat(U,"-bg")),s.highlight||q(b,tl),s.cropBoxMovable&&(q(b,Rt),Ge(b,qe,Pt)),s.cropBoxResizable||(q(m.getElementsByClassName("".concat(U,"-line")),Q),q(m.getElementsByClassName("".concat(U,"-point")),Q)),this.render(),this.ready=!0,this.setDragMode(s.dragMode),s.autoCrop&&this.crop(),this.setData(s.data),ee(s.ready)&&se(n,ro,s.ready,{once:!0}),ze(n,ro)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),ye(this.element,Q)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Il,o}},{key:"setDefaults",value:function(n){F(lo,Oe(n)&&n)}}]),o}();F(bo.prototype,Vl,Ml,Bl,$l,Tl,Al);const Ll={class:"flex"},Ol=["aria-label"],jl={class:"ml-auto mb-2"},Pl={class:"w-full flex justify-center"},zl=["src"],Rl={__name:"Image",props:{selection:Object},emits:["load"],setup(o,{emit:t}){const n=t,s=o,{t:l}=e.inject("i18n"),{apiUrl:a}=ue(),u=e.ref(null),g=e.ref(null),c=e.ref(!1),y=e.ref(""),m=e.ref(!1),b=()=>{c.value=!c.value,c.value?g.value=new bo(u.value,{crop(E){}}):g.value.destroy()},S=e.inject("postData"),k=()=>{g.value.getCroppedCanvas({width:795,height:341}).toBlob(E=>{y.value="",m.value=!1,nt(a.value,{method:"POST",params:Object.assign(S,{q:"upload",adapter:s.selection.adapter,path:s.selection.item.path,file:E}),name:s.selection.item.basename,json:!1}).then(N=>{y.value=l("Updated."),u.value.src=wt(s.selection.adapter,s.selection.item.path),b(),n("load")}).catch(N=>{y.value=l(N.message),m.value=!0})})};return e.onMounted(()=>{n("load")}),(E,N)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Ll,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":o.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(o.selection.item.basename),9,Ol),e.createElementVNode("div",jl,[c.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:k,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(l)("Crop")),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:N[0]||(N[0]=D=>b())},e.toDisplayString(c.value?e.unref(l)("Cancel"):e.unref(l)("Edit")),1)])]),e.createElementVNode("div",Pl,[e.createElementVNode("img",{ref_key:"image",ref:u,class:"max-w-[50vh] max-h-[50vh]",src:e.unref(wt)(s.selection.adapter,s.selection.item.path),alt:""},null,8,zl)]),y.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:N[1]||(N[1]=D=>y.value=""),error:m.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(y.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)],64))}},Hl={class:"flex"},Ul=["aria-label"],Fl=e.createElementVNode("div",null,null,-1),Kl={__name:"Default",props:{selection:Object},emits:["load"],setup(o,{emit:t}){const n=t;return e.onMounted(()=>{n("load")}),(s,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Hl,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":o.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(o.selection.item.basename),9,Ul)]),Fl],64))}},Yl=["aria-label"],Wl={class:"w-full",preload:"",controls:""},Xl=["src"],Zl={__name:"Video",props:{selection:Object},emits:["load"],setup(o,{emit:t}){const{apiUrl:n}=ue(),s=o,l=t,a=()=>n.value+"?"+Ce({q:"preview",adapter:s.selection.adapter,path:s.selection.item.path});return e.onMounted(()=>{l("load")}),(u,g)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":o.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(o.selection.item.basename),9,Yl),e.createElementVNode("div",null,[e.createElementVNode("video",Wl,[e.createElementVNode("source",{src:a(),type:"video/mp4"},null,8,Xl),e.createTextVNode(" Your browser does not support the video tag. ")])])],64))}},ql=["aria-label"],Gl={class:"w-full",controls:""},Jl=["src"],Ql={__name:"Audio",props:{selection:Object},emits:["load"],setup(o,{emit:t}){const{apiUrl:n}=ue(),s=o,l=t,a=()=>n.value+"?"+Ce({q:"preview",adapter:s.selection.adapter,path:s.selection.item.path});return e.onMounted(()=>{l("load")}),(u,g)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":o.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(o.selection.item.basename),9,ql),e.createElementVNode("div",null,[e.createElementVNode("audio",Gl,[e.createElementVNode("source",{src:a(),type:"audio/mpeg"},null,8,Jl),e.createTextVNode(" Your browser does not support the audio element. ")])])],64))}},ec=["aria-label"],tc=["data"],rc=["src"],oc={__name:"Pdf",props:{selection:Object},emits:["load"],setup(o,{emit:t}){const{apiUrl:n}=ue(),s=o,l=t,a=()=>n.value+"?"+Ce({q:"preview",adapter:s.selection.adapter,path:s.selection.item.path});return e.onMounted(()=>{l("load")}),(u,g)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":o.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(o.selection.item.basename),9,ec),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"h-[60vh]",data:a(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:a(),width:"100%",height:"100%"},`
          <p>
            Your browser does not support PDFs.
            <a href="https://example.com/test.pdf">Download the PDF</a>
            .
          </p>
        `,8,rc)],8,tc)])],64))}},nc={class:"sm:flex sm:items-start"},sc={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},ic={class:"text-gray-700 dark:text-gray-200 text-sm"},ac={key:0,class:"flex leading-5"},lc=e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),cc={class:"py-2 flex font-normal break-all dark:text-gray-200 rounded text-xs"},dc={class:"font-bold pl-2"},hc={class:"font-bold pl-2"},uc=Object.assign({name:"VFModalPreview"},{props:{selection:Object},setup(o){const{apiUrl:t}=ue(),n=e.inject("emitter"),{t:s}=e.inject("i18n"),l=e.ref(!1),a=y=>l.value=y,u=o,g=y=>(u.selection.item.mime_type??"").startsWith(y),c=()=>{const y=t.value+"?"+Ce({q:"download",adapter:u.selection.adapter,path:u.selection.item.path});n.emit("vf-download",y)};return(y,m)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m[6]||(m[6]=b=>e.unref(n).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-gray-400 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Close")),1),e.createElementVNode("button",{type:"button",onClick:m[7]||(m[7]=b=>c()),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-gray-400 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Download")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",nc,[e.createElementVNode("div",sc,[e.createElementVNode("div",null,[g("text")?(e.openBlock(),e.createBlock(Ya,{key:0,selection:o.selection,onLoad:m[0]||(m[0]=b=>a(!0))},null,8,["selection"])):g("image")?(e.openBlock(),e.createBlock(Rl,{key:1,selection:o.selection,onLoad:m[1]||(m[1]=b=>a(!0))},null,8,["selection"])):g("video")?(e.openBlock(),e.createBlock(Zl,{key:2,selection:o.selection,onLoad:m[2]||(m[2]=b=>a(!0))},null,8,["selection"])):g("audio")?(e.openBlock(),e.createBlock(Ql,{key:3,selection:o.selection,onLoad:m[3]||(m[3]=b=>a(!0))},null,8,["selection"])):g("application/pdf")?(e.openBlock(),e.createBlock(oc,{key:4,selection:o.selection,onLoad:m[4]||(m[4]=b=>a(!0))},null,8,["selection"])):(e.openBlock(),e.createBlock(Kl,{key:5,selection:o.selection,onLoad:m[5]||(m[5]=b=>a(!0))},null,8,["selection"]))]),e.createElementVNode("div",ic,[l.value==!1?(e.openBlock(),e.createElementBlock("div",ac,[lc,e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",cc,[e.createElementVNode("div",null,[e.createElementVNode("span",dc,e.toDisplayString(e.unref(s)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(sr)(o.selection.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",hc,e.toDisplayString(e.unref(s)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(ir)(o.selection.item.last_modified)),1)])])]),_:1}))}}),fc={class:"sm:flex sm:items-start"},mc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),pc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},gc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},yc={class:"mt-2"},bc={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},vc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Sc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],_c={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},wc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],xc={class:"ml-1.5"},kc=["onKeyup"],Dc=Object.assign({name:"VFModalRename"},{props:{selection:Object,current:Object},setup(o){const t=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:s}=e.inject("i18n"),l=o,a=e.ref(l.selection.items[0]),u=e.ref(l.selection.items[0].basename),g=e.ref(""),c=()=>{u.value!=""&&t.emit("vf-fetch",{params:{q:"rename",adapter:n.value,path:l.current.dirname,item:a.value.path,name:u.value},onSuccess:()=>{t.emit("vf-toast-push",{label:s("%s is renamed.",u.value)})},onError:y=>{g.value=s(y.message)}})};return(y,m)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=b=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",fc,[mc,e.createElementVNode("div",pc,[e.createElementVNode("h3",gc,e.toDisplayString(e.unref(s)("Rename")),1),e.createElementVNode("div",yc,[e.createElementVNode("p",bc,[a.value.type=="dir"?(e.openBlock(),e.createElementBlock("svg",vc,Sc)):(e.openBlock(),e.createElementBlock("svg",_c,wc)),e.createElementVNode("span",xc,e.toDisplayString(a.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=b=>u.value=b),onKeyup:e.withKeys(c,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,kc),[[e.vModelText,u.value]]),g.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:m[1]||(m[1]=b=>g.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(g.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Ec={class:"sm:flex sm:items-start"},Nc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),Cc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Vc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Mc={class:"mt-2"},Bc={class:"text-gray-500 mb-1"},$c=["id"],Tc={key:0,class:"py-2"},Ac=["disabled","onClick"],Ic=Object.assign({name:"VFModalUpload"},{props:{current:Object},setup(o){const t=e.inject("emitter"),{apiUrl:n}=ue(),{t:s}=e.inject("i18n"),l=e.inject("maxFileSize"),a=o,u=e.ref(null),g=e.ref(null),c=e.ref(null),y=e.ref([]),m=e.ref(""),b=e.ref(!0),S=()=>{m.value="",u.value.start()},k=e.inject("postData");return e.onMounted(()=>{u.value=new ve.Uploader({runtimes:"html5",browse_button:c.value,container:g.value,max_file_size:l,multiple_queues:!0,file_data_name:"file",url:n.value+"?"+Ce(Object.assign(k,{q:"upload",adapter:a.current.adapter,path:a.current.dirname})),headers:{...ot&&{"X-CSRF-Token":ot}},init:{PostInit:function(){},FilesAdded:function(E,N){b.value=!1,ve.each(N,function(D){y.value.push({id:D.id,name:D.name,size:ve.formatSize(D.size),percent:""})})},UploadProgress:function(E,N){y.value[y.value.findIndex(D=>D.id==N.id)].percent=N.percent+"%"},UploadComplete:function(){b.value=!0,t.emit("vf-fetch",{params:{q:"index",adapter:a.current.adapter,path:a.current.dirname}})},Error:function(E,N){u.value.stop(),N.code==ve.HTTP_ERROR?m.value=s(JSON.parse(N.response).message):N.code==ve.FILE_SIZE_ERROR?m.value=s("The selected file exceeds the maximum file size. You cannot upload files greater than %s",[l]):m.value=s(N.message)}}}),u.value.init()}),(E,N)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{disabled:b.value,onClick:e.withModifiers(S,["prevent"]),type:"button",class:e.normalizeClass([b.value?"bg-blue-200 hover:bg-blue-200 dark:bg-gray-700/50 dark:hover:bg-gray-700/50 dark:text-gray-500":"bg-blue-600 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-500","w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"])},e.toDisplayString(e.unref(s)("Upload")),11,Ac),e.createElementVNode("button",{type:"button",onClick:N[1]||(N[1]=D=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Ec,[Nc,e.createElementVNode("div",Cc,[e.createElementVNode("h3",Vc,e.toDisplayString(e.unref(s)("Upload files")),1),e.createElementVNode("div",Mc,[e.createElementVNode("div",Bc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,D=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{id:D.id},[e.createTextVNode(e.toDisplayString(D.name)+" ( "+e.toDisplayString(D.size)+") ",1),e.createElementVNode("b",null,e.toDisplayString(D.percent),1)],8,$c)]))),256)),y.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Tc,e.toDisplayString(e.unref(s)("No files selected!")),1))]),e.createElementVNode("div",{class:"text-gray-500",ref_key:"container",ref:g},[e.createElementVNode("button",{ref_key:"pickFiles",ref:c,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Select Files")),513)],512),m.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:N[0]||(N[0]=D=>m.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Lc={class:"sm:flex sm:items-start"},Oc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),jc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Pc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},zc={class:"mt-2"},Rc={class:"flex text-sm text-gray-800 dark:text-gray-400"},Hc={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Uc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],Fc={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Kc=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],Yc={class:"ml-1.5"},Wc=["onKeyup","placeholder"],Xc=Object.assign({name:"VFModalArchive"},{props:{selection:Object,current:Object},setup(o){const t=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:s}=e.inject("i18n"),l=o,a=e.ref(""),u=e.ref(""),g=e.ref(l.selection.items),c=()=>{g.value.length&&t.emit("vf-fetch",{params:{q:"archive",adapter:n.value,path:l.current.dirname,items:JSON.stringify(g.value.map(({path:y,type:m})=>({path:y,type:m}))),name:a.value},onSuccess:()=>{t.emit("vf-toast-push",{label:s("The file(s) archived.")})},onError:y=>{u.value=s(y.message)}})};return(y,m)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=b=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Lc,[Oc,e.createElementVNode("div",jc,[e.createElementVNode("h3",Pc,e.toDisplayString(e.unref(s)("Archive the files")),1),e.createElementVNode("div",zc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,b=>(e.openBlock(),e.createElementBlock("p",Rc,[b.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Hc,Uc)):(e.openBlock(),e.createElementBlock("svg",Fc,Kc)),e.createElementVNode("span",Yc,e.toDisplayString(b.basename),1)]))),256)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=b=>a.value=b),onKeyup:e.withKeys(c,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(s)("Archive name. (.zip file will be created)"),type:"text"},null,40,Wc),[[e.vModelText,a.value]]),u.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:m[1]||(m[1]=b=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Zc={class:"sm:flex sm:items-start"},qc=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Gc={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Jc={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Qc={class:"mt-2"},ed={class:"flex text-sm text-gray-800 dark:text-gray-400"},td={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},rd=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],od={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},nd=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],sd={class:"ml-1.5"},id={class:"my-1 text-sm text-gray-500"},ad=Object.assign({name:"VFModalUnarchive"},{props:{selection:Object,current:Object},setup(o){const t=e.inject("emitter");e.inject("storage");const n=e.inject("adapter"),{t:s}=e.inject("i18n"),l=o;e.ref("");const a=e.ref(l.selection.items[0]),u=e.ref(""),g=e.ref([]),c=()=>{t.emit("vf-fetch",{params:{q:"unarchive",adapter:n.value,path:l.current.dirname,item:a.value.path},onSuccess:()=>{t.emit("vf-toast-push",{label:s("The file unarchived.")})},onError:y=>{u.value=s(y.message)}})};return(y,m)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:m[1]||(m[1]=b=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(s)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Zc,[qc,e.createElementVNode("div",Gc,[e.createElementVNode("h3",Jc,e.toDisplayString(e.unref(s)("Unarchive")),1),e.createElementVNode("div",Qc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,b=>(e.openBlock(),e.createElementBlock("p",ed,[b.type=="dir"?(e.openBlock(),e.createElementBlock("svg",td,rd)):(e.openBlock(),e.createElementBlock("svg",od,nd)),e.createElementVNode("span",sd,e.toDisplayString(b.basename),1)]))),256)),e.createElementVNode("p",id,e.toDisplayString(e.unref(s)("The archive will be unarchived at"))+" ("+e.toDisplayString(o.current.dirname)+")",1),u.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:m[0]||(m[0]=b=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ld={class:"sm:flex sm:items-start"},cd=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),dd={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},hd={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ud={class:"mt-2"},fd={class:"flex text-sm text-gray-800 dark:text-gray-400"},md={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},pd=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)],gd={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},yd=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)],bd={class:"ml-1.5"},vd={class:"text-sm text-gray-500 pb-1 pt-3"},Sd={class:"flex text-sm text-gray-800 dark:text-gray-400"},_d=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),wd={class:"ml-1.5 overflow-auto"},Jt={VueFinder:qi,...Object.freeze(Object.defineProperty({__proto__:null,ModalArchive:Xc,ModalDelete:ya,ModalMessage:ka,ModalMove:Object.assign({name:"VFModalMove"},{props:{selection:Object,current:Object},setup(o){const t=e.inject("emitter"),{t:n}=e.inject("i18n");e.inject("storage");const s=e.inject("adapter"),l=o,a=e.ref(l.selection.items.from),u=e.ref(""),g=()=>{a.value.length&&t.emit("vf-fetch",{params:{q:"move",adapter:s.value,path:l.current.dirname,items:JSON.stringify(a.value.map(({path:c,type:y})=>({path:c,type:y}))),item:l.selection.items.to.path},onSuccess:()=>{t.emit("vf-toast-push",{label:n("Files moved.",l.selection.items.to.name)})},onError:c=>{u.value=n(c.message)}})};return(c,y)=>(e.openBlock(),e.createBlock(me,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:g,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(n)("Yes, Move!")),1),e.createElementVNode("button",{type:"button",onClick:y[1]||(y[1]=m=>e.unref(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",ld,[cd,e.createElementVNode("div",dd,[e.createElementVNode("h3",hd,e.toDisplayString(e.unref(n)("Move files")),1),e.createElementVNode("div",ud,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,m=>(e.openBlock(),e.createElementBlock("p",fd,[m.type=="dir"?(e.openBlock(),e.createElementBlock("svg",md,pd)):(e.openBlock(),e.createElementBlock("svg",gd,yd)),e.createElementVNode("span",bd,e.toDisplayString(m.path),1)]))),256)),e.createElementVNode("p",vd,e.toDisplayString(e.unref(n)("Are you sure you want to move these files?")),1),e.createElementVNode("p",Sd,[_d,e.createElementVNode("span",wd,e.toDisplayString(o.selection.items.to.path),1)]),u.value.length?(e.openBlock(),e.createBlock(pe,{key:0,onHidden:y[0]||(y[0]=m=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ModalNewFile:za,ModalNewFolder:$a,ModalPreview:uc,ModalRename:Dc,ModalUnarchive:ad,ModalUpload:Ic},Symbol.toStringTag,{value:"Module"}))},uu="",fu="",xd={install(o){for(const t in Jt)if(Jt.hasOwnProperty(t)){const n=Jt[t];o.component(n.name,n)}}},kd=Object.freeze(Object.defineProperty({__proto__:null,default:`{
  "Language": "",
  "Create": "",
  "Close": "",
  "Cancel": "",
  "Save": "",
  "Edit": "",
  "Crop": "",
  "New Folder": "",
  "New File": "",
  "Rename": "",
  "Delete": "",
  "Upload": "",
  "Download": "",
  "Archive": "",
  "Unarchive": "",
  "Open": "",
  "Open containing folder": "",
  "Refresh": "",
  "Preview": "",
  "Dark Mode": "",
  "Toggle Full Screen": "",
  "Change View": "",
  "Storage" : "",
  "Go up a directory": "",
  "Search anything..": "",
  "Name": "",
  "Size": "",
  "Date": "",
  "Filepath": "",
  "About": "",
  "Folder Name": "",
  "File Name": "",
  "Move files": "",
  "Are you sure you want to move these files to?": "",
  "Yes, Move!": ", !",
  "Delete files": "",
  "Yes, Delete!": ", !",
  "Upload Files" : "",
  "No files selected!": "!",
  "Select Files": "",
  "Archive the files": "",
  "Unarchive the files": "",
  "The archive will be unarchived at": "",
  "Archive name. (.zip file will be created)": ".zip",
  "Vuefinder is a file manager component for vue 3.": "Vuefindervue3",
  "Create a new folder": "",
  "Create a new file": "",
  "Are you sure you want to delete these files?": "?",
  "This action cannot be undone.": ".",
  "Search results for" : "",
  "item(s) selected.": ".",
  "%s is renamed." : "%s ",
  "This is a readonly storage." : ".",
  "%s is created." : "%s .",
  "Files moved." : ".",
  "Files deleted." : ".",
  "The file unarchived." : ".",
  "The file(s) archived." : ".",
  "Updated." : ".",
  "No search result found." : ".",
  "Are you sure you want to move these files?" : "?",
  "File Size": "",
  "Last Modified": "",
  "Drag&Drop: on": ": ",
  "Drag&Drop: off": ": ",
  "The selected file exceeds the maximum file size. You cannot upload files greater than %s": " %s"
}
`},Symbol.toStringTag,{value:"Module"})),Dd=Object.freeze(Object.defineProperty({__proto__:null,default:`{
  "Language": "Language",
  "Create": "Create",
  "Close": "Close",
  "Cancel": "Cancel",
  "Save": "Save",
  "Edit": "Edit",
  "Crop": "Crop",
  "New Folder": "New Folder",
  "New File": "New File",
  "Rename": "Rename",
  "Delete": "Delete",
  "Upload": "Upload",
  "Download": "Download",
  "Archive": "Archive",
  "Unarchive": "Unarchive",
  "Open": "Open",
  "Open containing folder": "Open containing folder",
  "Refresh": "Refresh",
  "Preview": "Preview",
  "Dark Mode": "Dark Mode",
  "Toggle Full Screen": "Toggle Full Screen",
  "Change View": "Change View",
  "Storage" : "Storage",
  "Go up a directory": "Go up a directory",
  "Search anything..": "Search anything..",
  "Name": "Name",
  "Size": "Size",
  "Date": "Date",
  "Filepath": "Filepath",
  "About": "About",
  "Folder Name": "Folder Name",
  "File Name": "File Name",
  "Move files": "Move files",
  "Are you sure you want to move these files to?": "Are you sure you want to move these files to?",
  "Yes, Move!": "Yes, Move!",
  "Delete files": "Delete files",
  "Yes, Delete!": "Yes, Delete!",
  "Upload Files" : "Upload Files",
  "No files selected!": "No files selected!",
  "Select Files": "Select Files",
  "Archive the files": "Archive the files",
  "Unarchive the files": "Unarchive the files",
  "The archive will be unarchived at": "The archive will be unarchived at",
  "Archive name. (.zip file will be created)": "Archive name. (.zip file will be created)",
  "Vuefinder is a file manager component for vue 3.": "Vuefinder is a file manager component for vue 3.",
  "Create a new folder": "Create a new folder",
  "Create a new file": "Create a new file",
  "Are you sure you want to delete these files?": "Are you sure you want to delete these files?",
  "This action cannot be undone.": "This action cannot be undone.",
  "Search results for" : "Search results for",
  "item(s) selected.": "item(s) selected.",
  "%s is renamed." : "%s is renamed.",
  "This is a readonly storage." : "This is a readonly storage.",
  "%s is created." : "%s is created.",
  "Files moved." : "Files moved.",
  "Files deleted." : "Files deleted.",
  "The file unarchived." : "The file unarchived.",
  "The file(s) archived." : "The file(s) archived.",
  "Updated." : "Updated.",
  "No search result found." : "No search result found.",
  "Are you sure you want to move these files?" : "Are you sure you want to move these files?",
  "File Size": "File Size",
  "Last Modified": "Last Modified",
  "Drag&Drop: on": "Drag&Drop: on",
  "Drag&Drop: off": "Drag&Drop: off",
  "The selected file exceeds the maximum file size. You cannot upload files greater than %s": "The selected file exceeds the maximum file size. You cannot upload files greater than %s"
}
`},Symbol.toStringTag,{value:"Module"}));return xd});
